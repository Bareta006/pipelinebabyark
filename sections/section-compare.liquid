<style>
    .comparison-table {
        flex-direction: column;
        background-color: rgba(232, 232, 232, 0.7);
        padding: 15px 0;
        border-radius: 16px;
    }
  .comparison-table,
  .comparison-row {
    width: 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
    color:#000;
  }

  .product-column {
    flex: 1;
    text-align: center;
  }

  .features-column {
    flex: 1;
    text-align: center;
    margin: 0 20px;
  }

  .cell {
    padding: 0px;
  }

  .featureName {
    text-align: center;
    font-weight: 500;
  }

  .featureValue {
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  }


  .comparison-row {
    margin: 5px 0;
  }

  .comparison-row .featureName {
    flex: 0.7;
  }

  .comparison-row .featureValue {
    flex: 0.3;
  }

  .linktopage {
    cursor: pointer;
  }
  .tableSide {
    width: 100%;
    max-width: 480px;
    margin: 0 auto;
}
  @media screen and (max-width: 767px) {
    .comparison-table,
    .comparison-row {
      flex-direction: column;
    }
    
    .features-column {
      margin: 20px 0;
    }
    
    .featureValue {
      width: 100%;
      min-width: unset;
    }
  }

  .product-1 {
    background-color: var(--product-1-color);
  }

  .product-2 {
    background-color: var(--product-2-color);
  }
</style>

<!-- /sections/section-hero.liquid -->

{%- assign scroll_class = '' -%}
{% if section.settings.height == 'use_screen_full' %}
  {%- assign scroll_class = 'has-scroll-arrow' -%}
{%- endif -%}

{% if section.settings.preload_image %}
  {%- assign preload = true -%}
  {%- assign loading = 'eager' -%}
  {%- assign fetchpriority = 'high' -%}
{% else %}
  {%- assign preload = false -%}
  {%- assign loading = 'lazy' -%}
{% endif %}

{% assign hero_content_class = 'hero__content' %}
{% if section.settings.width == 'wrapper--tiny' or section.settings.width == 'wrapper--narrow' %}
  {% assign hero_content_class = 'hero__content hero__content--large' %}
{% endif %}

<div class="section--image fade-in-child js-overflow-container {{ scroll_class }}"
  data-section-id="{{ section.id }}"
  data-section-type="hero"
  {% if section.settings.width == "wrapper--none" and section.settings.padding_top == 0 %} data-overlay-header {% endif %}
  style="
  --PT: {{ section.settings.padding_top }}px;
  --PB: {{ section.settings.padding_bottom }}px;
  --CONTENT-WIDTH: {{ section.settings.content_width }}px;">
  <div class="{{ section.settings.width }} section-padding">
    <div class="section__inner">
      <div class="hero__content__wrapper {{ section.settings.text_align }}">
        <div class="{{ hero_content_class }} {{ section.settings.color_bg }} js-overflow-content">
          {%- assign animation_anchor = "[data-section-id='" | append: section.id | append: "']" -%}
          {%- assign elements_counter = 0 -%}

          <div class="text__standard {{ section.settings.text_color }}" 
               style="
                 --product-1-color: {{ first_product.metafields.comparison.color }};
                 --product-2-color: {{ second_product.metafields.comparison.color }};
               ">
            <div class="md:w-2/3 promotion w-full flex flex-col items-center tableSide md:pt-16 md:pb-8 pb-8 pt-8">
              {% assign feature_names = "SafeCoil™ Technology,Rigid LATCH Connection,BioArk™ Side Impact Protection,Front Support Leg,Anti-Rebound Bar,Magnetic straps,Quick Lock Chest Clip,No Rethread Harness,9 Recline Positions,No Expiration Date,Guiding Lights,App Connectivity and real life notifications" | split: ',' %}
              {% assign metafield_keys = "safecoil,rigid,bioark,supportleg,rebound,magneticstraps,quick_lock_chest_clip,no_rethread_headrest,9_recline_positions,no_expiration_date,guiding_lights,app_connectivity" | split: ',' %}

              <div class="comparison-table flex">
                <div class="comparison-row flex">
                <!-- Left product column -->

                {% assign first_product = all_products[section.blocks[0].settings.product_id] %}
                {% if first_product %}
                  <div class="cell p-4 featureValue product-1">
                    <div class="cell font-bold p-4 featureValue product-1">
                      <svg width="10" height="16" viewBox="0 0 10 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M4.75955 11.2973C3.49772 11.2958 2.28803 10.8027 1.39578 9.92615C0.503529 9.04962 0.00157172 7.86124 0 6.62164C0 5.38075 0.488033 3.80144 1.27205 2.49734C2.24416 0.886905 3.48057 0 4.75955 0C6.03853 0 7.27792 0.886905 8.24706 2.49734C9.03206 3.80046 9.5191 5.38075 9.5191 6.62164C9.51753 7.86124 9.01558 9.04962 8.12333 9.92615C7.23108 10.8027 6.02138 11.2958 4.75955 11.2973ZM4.75955 1.5657C4.08641 1.5657 3.29546 2.21143 2.6431 3.29477C2.01549 4.33727 1.59378 5.67444 1.59378 6.62164C1.59378 7.44698 1.92752 8.23851 2.52159 8.82212C3.11566 9.40572 3.92139 9.73358 4.76153 9.73358C5.60167 9.73358 6.4074 9.40572 7.00147 8.82212C7.59554 8.23851 7.92929 7.44698 7.92929 6.62164C7.92929 5.67444 7.50758 4.33727 6.87997 3.29477C6.22365 2.21143 5.4327 1.5657 4.75955 1.5657Z" fill="#304545"/>
                        <path d="M4.75955 15.7831C3.49772 15.7816 2.28803 15.2885 1.39578 14.4119C0.503529 13.5354 0.00157172 12.347 0 11.1074H1.59378C1.59378 11.9328 1.92752 12.7243 2.52159 13.3079C3.11566 13.8915 3.92139 14.2194 4.76153 14.2194C5.60167 14.2194 6.4074 13.8915 7.00147 13.3079C7.59554 12.7243 7.92929 11.9328 7.92929 11.1074H9.52306C9.52149 12.3477 9.01899 13.5367 8.12589 14.4133C7.23278 15.2899 6.02207 15.7826 4.75955 15.7831Z" fill="#304545"/>
                      </svg>
                      <span>{{ first_product.metafields.comparison.titlename }}</span>
                      {% if section.blocks[0].settings.product_badge != blank %}
                        <span class="productBadgeTop">{{ section.blocks[0].settings.product_badge }}</span>
                      {% endif %}
                    </div>
                  </div>
                {% endif %}

                <!-- Middle column - now just empty for header -->
                <div class="cell p-4 featureName">
                  <div class="cell p-4 featureName"></div>
                </div>

                <!-- Right product column -->
                {% assign second_product = all_products[section.blocks[1].settings.product_id] %}
                {% if second_product %}
                  <div class="cell p-4 featureValue product-2">
                    <div class="cell font-bold p-4 featureValue product-2">

                      <svg width="10" height="16" viewBox="0 0 10 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M4.75955 11.2973C3.49772 11.2958 2.28803 10.8027 1.39578 9.92615C0.503529 9.04962 0.00157172 7.86124 0 6.62164C0 5.38075 0.488033 3.80144 1.27205 2.49734C2.24416 0.886905 3.48057 0 4.75955 0C6.03853 0 7.27792 0.886905 8.24706 2.49734C9.03206 3.80046 9.5191 5.38075 9.5191 6.62164C9.51753 7.86124 9.01558 9.04962 8.12333 9.92615C7.23108 10.8027 6.02138 11.2958 4.75955 11.2973ZM4.75955 1.5657C4.08641 1.5657 3.29546 2.21143 2.6431 3.29477C2.01549 4.33727 1.59378 5.67444 1.59378 6.62164C1.59378 7.44698 1.92752 8.23851 2.52159 8.82212C3.11566 9.40572 3.92139 9.73358 4.76153 9.73358C5.60167 9.73358 6.4074 9.40572 7.00147 8.82212C7.59554 8.23851 7.92929 7.44698 7.92929 6.62164C7.92929 5.67444 7.50758 4.33727 6.87997 3.29477C6.22365 2.21143 5.4327 1.5657 4.75955 1.5657Z" fill="#304545"/>
                        <path d="M4.75955 15.7831C3.49772 15.7816 2.28803 15.2885 1.39578 14.4119C0.503529 13.5354 0.00157172 12.347 0 11.1074H1.59378C1.59378 11.9328 1.92752 12.7243 2.52159 13.3079C3.11566 13.8915 3.92139 14.2194 4.76153 14.2194C5.60167 14.2194 6.4074 13.8915 7.00147 13.3079C7.59554 12.7243 7.92929 11.9328 7.92929 11.1074H9.52306C9.52149 12.3477 9.01899 13.5367 8.12589 14.4133C7.23278 15.2899 6.02207 15.7826 4.75955 15.7831Z" fill="#304545"/>
                      </svg>
                      <span>{{ second_product.metafields.comparison.titlename }}</span>
                      {% if section.blocks[1].settings.product_badge != blank %}
                        <span class="productBadgeTop">{{ section.blocks[1].settings.product_badge }}</span>
                      {% endif %}
                    </div>
                  </div>
                {% endif %}
              </div>

              <!-- Feature comparison rows -->
              {% for i in (0..feature_names.size) %}
                {% assign feature_name = feature_names[i] %}
                {% assign metafield_key = metafield_keys[i] %}
                {% if feature_name != blank and metafield_key != blank %}
                  <div class="comparison-row flex">
                    <!-- Left product value -->
                    {% if first_product %}
                      <div class="cell p-4 featureValue product-1">
                        {% if first_product.metafields.comparison[metafield_key] == 'true' or first_product.metafields.comparison[metafield_key] == true %}
                            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="9" viewBox="0 0 12 9" fill="none">
                            <path d="M9.91464 1.48047L4.02484 7.47736L1.34766 4.7515" stroke="black" stroke-width="2.5771" stroke-linecap="round" stroke-linejoin="round"/>
                          </svg>
                        {% else %}
                        <svg style="fill:none;" width="14" height="3" viewBox="0 0 14 3" fill="none" xmlns="http://www.w3.org/2000/svg"> <line x1="1.5" y1="1.5" x2="12.5" y2="1.5" stroke="#304545" stroke-width="3" stroke-linecap="round"></line> </svg>
                        {% endif %}
                      </div>
                    {% endif %}

                    <!-- Feature name -->
                    <div class="cell p-4 featureName"><span>{{ feature_name }}</span></div>

                    <!-- Right product value -->
                    {% if second_product %}
                      <div class="cell p-4 featureValue product-2">
                        {% if second_product.metafields.comparison[metafield_key] == 'true' or second_product.metafields.comparison[metafield_key] == true %}
                            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="9" viewBox="0 0 12 9" fill="none">
                            <path d="M9.91464 1.48047L4.02484 7.47736L1.34766 4.7515" stroke="black" stroke-width="2.5771" stroke-linecap="round" stroke-linejoin="round"/>
                          </svg>
                        {% else %}
                        <svg style="fill:none;" width="14" height="3" viewBox="0 0 14 3" fill="none" xmlns="http://www.w3.org/2000/svg"> <line x1="1.5" y1="1.5" x2="12.5" y2="1.5" stroke="#304545" stroke-width="3" stroke-linecap="round"></line> </svg>
                        {% endif %}
                      </div>
                    {% endif %}
                  </div>
                {% endif %}
              {% endfor %}

              <!-- Price row -->
              <div class="comparison-row flex">
                {% if first_product %}
                  <div class="cell p-4 featureValue featurePrice">
                    <span>{{ first_product.price | money_without_trailing_zeros }}</span>
                  </div>
                {% endif %}
                <div class="cell p-4 featureName"><span>Price</span></div>
                {% if second_product %}
                  <div class="cell p-4 featureValue featurePrice">
                    <span>{{ second_product.price | money_without_trailing_zeros }}</span>
                  </div>
                {% endif %}
              </div>

              <!-- Button links -->
              <div class="comparison-row flex">
                {% if first_product %}
                  <div class="cell p-4 featureValue featureLink">
                    {% if section.blocks[0].settings.product_atc %}
                      <a style="cursor:pointer;" onClick="productPageAtc();" class="linktopage atc">Add To Cart</a>
                    {% else %}
                      <a href="{{ first_product.url }}" class="linktopage">Shop Now</a>
                    {% endif %}
                  </div>
                {% endif %}
                <div class="cell p-4 featureName"></div>
                {% if second_product %}
                  <div class="cell p-4 featureValue featureLink">
                    {% if section.blocks[1].settings.product_atc %}
                      <a style="cursor:pointer;" onClick="productPageAtc();" class="linktopage atc">Add To Cart</a>
                    {% else %}
                      <a href="{{ second_product.url }}" class="linktopage">Shop Now</a>
                    {% endif %}
                  </div>
                {% endif %}
              </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      {% unless section.settings.enable_overlay_text %}
        <div class="image-overlay" style="--bg: {{ section.settings.overlay_color }}; opacity: {{ section.settings.overlay_opacity | times: 0.01 }};"></div>
      {% endunless %}

      {% for block in section.blocks %}
        {% case block.type %}
          {% when 'collage' %}
            <div class="standard__collage {{ block.settings.mobile_display_class }}"
              style="
              --COLLAGE-WIDTH: {{ block.settings.image_max_limit | append: 'px' }};
              --COLLAGE-TOP: {{ block.settings.position_top | append: '%' }};
              --COLLAGE-LEFT: {{ block.settings.position_left | append: '%' }};
              "
              {{ block.shopify_attributes }}>

              {%- assign wh_ratio = block.settings.image.aspect_ratio | default: 1 -%}

              {%- capture sizes -%}
                min({{ block.settings.image_max_limit }}px, 100vw)
              {%- endcapture -%}

              {% render 'image', img_object: block.settings.image, sizes: sizes, wh_ratio: wh_ratio, placeholder: 'logo', preload: preload, loading: loading, class: block.settings.shape_class %}
            </div>
        {% endcase %}
      {% endfor %}

      {% if section.settings.link_text == '' and section.settings.link %}
        <a class="link-over-image" href="{{ section.settings.link }}" aria-label="{{ section.settings.title | strip_html | escape }}"></a>
      {% endif %}

      {%- assign alt = section.settings.image.alt | default: 'Banner Image' -%}
      {% render 'image-parallax', img_object: section.settings.image, img_object_mobile: section.settings.mobile_image, frame_height_class: section.settings.height, alt: alt, preload: preload, loading: loading, fetchpriority: fetchpriority %}

      {% if section.settings.height == 'use_screen_full' %}
        <div class="scroll_icon_wrap">
          <button data-scroll-down class="scroll_link bloop {{ section.settings.text_color }}" aria-label="{{ 'general.accessibility.scroll' | t }}">
            <span class="scroll_icon">{% render 'icon-core-chevron-down' %}</span>
          </button>
        </div>
      {% endif %}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Image banner",
  "settings": [
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image"
    },
    {
      "type": "image_picker",
      "id": "mobile_image",
      "label": "Mobile image"
    },
    {
      "type": "select",
      "id": "height",
      "label": "Section height",
      "default": "use_screen_two_thirds",
      "options": [
        { "value": "use_screen_full", "label": "Full screen height"},
        { "value": "use_screen_three_quarters", "label": "Three quarters of screen height"},
        { "value": "use_screen_two_thirds", "label": "Two thirds of screen height"},
        { "value": "use_screen_one_half", "label": "One half of screen height"},
        { "value": "use_screen_one_third", "label": "One third of screen height"},
        { "value": "use_screen_one_fifth", "label": "One fifth of screen height"},
        { "value": "use_pixels_800", "label": "800px" },
        { "value": "use_pixels_650", "label": "650px" },
        { "value": "use_pixels_500", "label": "500px" },
        { "value": "use_image", "label": "Image height"}
      ]
    },
    {
      "type":    "range",
      "id":      "overlay_opacity",
      "min":     0,
      "max":     100,
      "step":    5,
      "label":   "Image overlay opacity",
      "info":    "Increase contrast for legible text.",
      "default": 15
    },
    {
      "type": "color",
      "id": "overlay_color",
      "label": "Overlay color",
      "default": "#000"
    },
    {
      "type": "checkbox",
      "id": "enable_overlay_text",
      "label": "Overlay behind text only",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "preload_image",
      "label": "Prioritize image load",
      "default": false,
      "info": "Prioritize loading this image before other images. Helpful when this section is first on a page, harmful when this section is below other image sections."
    },
    {
      "type": "header",
      "content": "Text"
    },
    {
      "type": "range",
      "id": "content_width",
      "label": "Width limit",
      "unit": "px",
      "min": 100,
      "max": 2000,
      "step": 50,
      "default": 2000
    },
    {
      "type": "select",
      "id": "text_align",
      "label": "Alignment",
      "default": "align--middle-center",
      "options": [
        { "value": "align--top-left", "label": "Top left"},
        { "value": "align--top-center", "label": "Top center"},
        { "value": "align--top-right", "label": "Top right"},
        { "value": "align--middle-left", "label": "Middle left"},
        { "value": "align--middle-center", "label": "Absolute center"},
        { "value": "align--middle-right", "label": "Middle right"},
        { "value": "align--bottom-left", "label": "Bottom left"},
        { "value": "align--bottom-center", "label": "Bottom center"},
        { "value": "align--bottom-right", "label": "Bottom right"}
      ]
    },
    {
      "type": "select",
      "id": "text_color",
      "label": "Text color",
      "default": "text--white",
      "options": [
        { "value": "text--neutral", "label": "Normal text"},
        { "value": "text--white", "label": "White"},
        { "value": "text--primary", "label": "Primary accent"},
        { "value": "text--secondary", "label": "Secondary accent"},
        { "value": "text--black", "label": "Black"},
        { "value": "text--invert--primary", "label": "Primary dark accent"},
        { "value": "text--invert--secondary", "label": "Secondary dark accent"},
        { "value": "text--invert", "label": "Inverted text color"},
        { "value": "text--bright--primary", "label": "Primary bright accent"},
        { "value": "text--bright--secondary", "label": "Secondary bright accent"}
      ]
    },
    {
      "type": "select",
      "id": "color_bg",
      "label": "Background color",
      "default": "hero__content--transparent",
      "options": [
        { "value": "hero__content--transparent", "label": "Transparent"},
        { "value": "palette--light bg--neutral", "label": "White"},
        { "value": "palette--light bg--accent", "label": "Light"},
        { "value": "palette--dark bg--invert", "label": "Dark"},
        { "value": "palette--dark bg--invert--accent", "label": "Dark accent"},
        { "value": "palette--bright bg--bright", "label": "Bright"},
        { "value": "palette--bright bg--bright--accent", "label": "Bright accent"}
      ]
    },
    {
      "type": "header",
      "content": "Section spacing"
    },
    {
      "type": "select",
      "id": "width",
      "label": "Width",
      "default": "wrapper--none",
      "options": [
        { "value": "wrapper--none", "label": "Full width" },
        { "value": "wrapper--full", "label": "Full width padded" },
        { "value": "wrapper", "label": "Page width" },
        { "value": "wrapper--narrow", "label": "Page width narrow" },
        { "value": "wrapper--tiny", "label": "Page width extra narrow" }
      ]
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 180,
      "step": 2,
      "unit": "px",
      "label": "Padding top",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 180,
      "step": 2,
      "unit": "px",
      "label": "Padding bottom",
      "default": 0
    }
  ],
  "blocks": [
    {
      "type": "compare",
      "name": "Product",
      "settings": [
        {
          "type": "product",
          "id": "product_id",
          "label": "Select Product"
        },        {
          "type": "text",
          "id": "product_badge",
          "label": "add a text badge",
          "default": "new"
        },
        {
          "type": "checkbox",
          "id": "product_atc",
          "label": "add to cart button?",
          "default": false
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Image compare products",
      "category": "Image",
      "blocks": [
        {
          "type": "compare"
        }
      ]
    }
  ],
  "disabled_on": {
    "groups": ["header","aside"]
  }
}
{% endschema %}
