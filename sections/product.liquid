<!-- /sections/product.liquid -->
{%- liquid
  assign current_variant = product.selected_or_first_available_variant

  assign padding_top = section.settings.padding_top
  if section.settings.product_breadcrumbs
    assign padding_top = padding_top | divided_by: 2
  endif
-%}

<!-- Sticky Add to Cart Bar -->
{% if section.settings.enable_sticky_desktop or section.settings.enable_sticky_mobile %}
  <div id="sticky-add-to-cart" class="sticky-add-to-cart" 
       data-sticky-desktop="{{ section.settings.enable_sticky_desktop }}"
       data-sticky-mobile="{{ section.settings.enable_sticky_mobile }}"
       style="display: none;">
    <div class="sticky-add-to-cart__content">
      <div class="sticky-add-to-cart__left">
        <h3 class="sticky-add-to-cart__title">{{ product.title }}</h3>
      </div>
      <div class="sticky-add-to-cart__right">
        <div class="sticky-add-to-cart__variants" id="stickyLabels"></div>
        <div class="sticky-add-to-cart__price">
          <span class="sticky-add-to-cart__price-label">Total: </span>
          <span class="sticky-add-to-cart__price-value">{{ current_variant.price | money }}</span>
        </div>
        <button class="sticky-add-to-cart__button btn btn--large" type="button">
          Add to Cart
        </button>
      </div>
    </div>
  </div>
{% endif %}

<div class="product-section section-padding {{ section.settings.bg }}"
  data-product-handle="{{ product.handle }}"
  data-section-id="{{ section.id }}"
  data-section-type="product"
  data-form-holder
  data-enable-video-looping="{{ section.settings.enable_video_looping }}"
  data-enable-history-state="true"
  style="--PT: {{ section.settings.padding_top }}px; --PB: {{ section.settings.padding_bottom }}px; --IMAGE-SPACING: {{ section.settings.image_spacing }}px;">
  {%- liquid
  assign images_settings = section.settings.layout | split: '@'
  assign wrapper_class = section.settings.width
  assign image_width = section.settings.image_width
  assign thumbnails = images_settings[0]
  assign grid_style = images_settings[1]
  assign data_thumbnails_left = ''

  if thumbnails == 'thumbnails-left'
    assign data_thumbnails_left = 'data-thumbnails-left'
  endif

  assign has_thumbnails_setting = false
  if thumbnails == 'thumbnails-left' or thumbnails == 'thumbnails-below' or section.settings.mobile_layout == 'thumbs'
    assign has_thumbnails_setting = true
  endif

  assign desktop_slideshow_style = 'none'
  if grid_style == 'slides'
    assign desktop_slideshow_style = 'slideshow'
  endif

  if wrapper_class == 'wrapper--none'
    if thumbnails == 'thumbnails-left' or thumbnails == 'thumbnails-below'
      assign wrapper_class = 'wrapper--full'
    endif
  endif

  assign product_form_id = 'product-form-' | append: section.id | append: '-' | append: product.id

  assign product_has_breadcrumbs = false
  if section.settings.product_breadcrumbs_enable and section.settings.product_breadcrumbs_list.count > 0
    assign product_has_breadcrumbs = true
  endif

  assign pad_title = ''
  if section.settings.padding_top < 20 and product_has_breadcrumbs
    assign pad_title = 'push-product-title'
  endif

  case image_width
    when 'half'
      assign product_image_width = 'medium-up--one-half'
      assign product_description_width = 'medium-up--one-half'
    else
      assign product_image_width = 'large-up--five-eighths medium--one-half'
      assign product_description_width = 'large-up--three-eighths medium--one-half'
  endcase

  # rearrange media for alt text filter if needed
  assign has_alt_text_filtered_images = false
  assign alt_text_concat = product.media | map: 'alt' | join: ''
  if alt_text_concat contains '#' and alt_text_concat contains '_'
    assign has_alt_text_filtered_images = true
  endif

  # First image aspect ratio is used to prevent jank/CLS
  assign first_product_media = product.media[0]

  # First image may change if we reorder images with alt-text filters
  if has_alt_text_filtered_images
   capture media_list
     render 'order-media', product: product, order: true
   endcapture
   assign media_list = media_list | strip_html | strip | split : ','
   # change the first product media if we rearrange media
   if media_list.size == product.media.size
     assign new_media_position = media_list[0] | minus: 1
     assign first_product_media = product.media[new_media_position]
   endif
  endif
-%}

{% if product_has_breadcrumbs %}
  {% capture breadcrumbs_markup %}
    {% for collection in section.settings.product_breadcrumbs_list %}
      <a href="{{ collection.url }}" title="{{ collection.title }}">{{ collection.title }}</a>
      <span aria-hidden="true">&rsaquo;</span>
    {% endfor %}
    <span>{{ product.title }}</span>
  {% endcapture %}
{% endif %}

<div class="product-page">
  <script>
  // Make productData globally available for bundle delivery script
  window.productData = {{ product | json }};
  console.log("ðŸš€ Product Object Dump:", window.productData);
</script>
  {% comment %} Conditional delivery info rendering {% endcomment %}
  {% if product.metafields.bundleinfo.bundleproducts.value %}
    {% comment %} BUNDLE PRODUCT: Render bundle delivery info {% endcomment %}
    {% render 'bundle-delivery-info' %}
  {% else %}
    {% comment %} REGULAR PRODUCT: Render existing delivery info {% endcomment %}
    {% render 'delivery-info' %}
  {% endif %}
  

  
  <div class="{{ wrapper_class }} {{ pad_title }} product__align-{{ section.settings.align }}">

    <div class="float-grid product-single" {{ data_thumbnails_left }}>
      {% if product_has_breadcrumbs %}
        <div class="grid__item one-whole">
          <nav class="breadcrumb{% unless wrapper_class != 'wrapper--none' %} medium-up--hide{% endunless %}" aria-label="breadcrumbs">
            {{ breadcrumbs_markup }}
          </nav>
        </div>
      {% endif %}

      <div class="grid__item product__media__wrapper {{ product_image_width }} product__mobile--{{ section.settings.mobile_layout }}">
        {% comment %} Product media slideshow {% endcomment %}
        <div class="product__grid product__grid--{{ grid_style }} flickity-lock-height"
          data-product-slideshow
          data-slideshow-desktop-style="{{ desktop_slideshow_style }}"
          data-slideshow-mobile-style="{{ section.settings.mobile_layout }}"
          {% unless section.settings.layout contains 'slides' %}
            data-vertical-images
          {% endunless %}
          {% if first_product_media.aspect_ratio > 0 %}
            style="--default-ratio: {{ 1 | divided_by: first_product_media.aspect_ratio | times: 100 | at_most: 150 }}%"
          {% endif %}
        >

          {% if product.media.size > 0 %}
            {% for media_item in product.media %}

              {% comment %} Variant image groups require product media to be in a specific order {% endcomment %}
              {% liquid
                assign media = media_item

                if has_alt_text_filtered_images and media_list.size == product.media.size
                  assign new_media_position = media_list[forloop.index0] | minus: 1
                  assign media = product.media[new_media_position]
                endif

                # For "slides" grid style, only show loading animation on first image since it's the only one visible
                if grid_style == 'slides' and first_product_media.id != media_item.id
                  assign loading_animation = false
                else
                  assign loading_animation = true
                endif
              %}

              {% render 'media', media: media, section: section, product: product, loading_animation: loading_animation %}
            {% endfor %}
          {% else %}
            <div class="product__image__placeholder">
            </div>
          {% endif %}
        </div>

        {% assign first_3d_model = product.media | where: "media_type", "model" | first %}
        {% if first_3d_model %}
          <button
            class="btn--outline btn--ar"
            data-shopify-xr
            data-shopify-model3d-id="{{ first_3d_model.id }}"
            data-shopify-title="{{ product.title | strip_html | escape }}"
            data-shopify-xr-hidden>
            {% render 'icon-media-model' %}
            <span>{{ 'products.product.view_in_space' | t }}</span>
          </button>
        {% endif %}

        {% if product.media.size > 1 and has_thumbnails_setting %}
          {% if thumbnails == 'none' %}
            {%- assign hide_thumbs_desktop = 'media__thumb__holder--mobile-only' -%}
          {% endif %}
          <div class="media__thumb__holder {{ hide_thumbs_desktop }}" data-thumbs-holder>
            <button class="media__thumb__button"
              data-thumbs-arrow-prev>
              {% render 'icon-core-chevron-up' %}
              <span class="visually-hidden">{{ 'general.accessibility.previous' | t }}</span>
            </button>

            <div
              {% if thumbnails == 'thumbnails-left' %} data-product-thumbs-slider{% endif %}
              data-product-thumbs
              class="media__thumb__wrapper">
              {% for media_item in product.media %}

                 {% comment %} Variant image groups require product media to be in a specific order {% endcomment %}
                {% assign media = media_item %}
                {% if has_alt_text_filtered_images and media_list.size == product.media.size %}
                  {% assign new_media_position = media_list[forloop.index0] | minus: 1 %}
                  {% assign media = product.media[new_media_position] %}
                {% endif %}

                {% assign alt_text = media.alt | strip_html %}
                {% assign alt_text_parts = alt_text | split: '#' %}
                {% assign alt_text_option = '' %}
                {% if alt_text contains '#' and alt_text contains '_' and alt_text_parts.size == 2 %}
                  {% assign alt_text_option = alt_text_parts | last | split: ' ' | first %}
                {% endif %}

                <div class="media__thumb{% if forloop.first %} is-activated{% endif %}"
                  data-slideshow-thumbnail
                  data-aspect-ratio="{% if media.aspect_ratio %}{{ media.aspect_ratio }}{% else %}{{ media.preview_image.aspect_ratio }}{% endif %}"
                  data-media-select="{{ media.id }}"
                  aria-label="{{ alt_text_parts | first | escape }}"
                  data-image-filter="{{ alt_text_option }}">
                  <img loading="lazy" class="loading-shimmer"
                    src="{{ media.preview_image.src | img_url: '114x144', crop: 'center' }}"
                    alt="{{ alt_text_parts | first | escape }}">
                  {%- if media.media_type == 'model' -%}
                    {% render 'icon-media-model' %}
                  {%- elsif media.media_type contains 'video' -%}
                    {% render 'icon-media-video' %}
                  {%- endif -%}
                </div>
              {% endfor %}
            </div>

            <button class="media__thumb__button"
              data-thumbs-arrow-next>
              {% render 'icon-core-chevron-down' %}
              <span class="visually-hidden">{{ 'general.accessibility.next' | t }}</span>
            </button>
          </div>
        {%- endif -%}
      </div>

      <div class="product__main__content grid__item {{ product_description_width }}">
        <div class="product__inner is-sticky" data-product-form-wrapper>
          {% if product_has_breadcrumbs %}
            <nav class="breadcrumb small-down--hide{% unless wrapper_class == 'wrapper--none' %} medium-up--hide{% endunless %}" aria-label="breadcrumbs">
              {{ breadcrumbs_markup }}
            </nav>
          {% endif %}

          {% for block in section.blocks %}
            {% case block.type %}
              {%- when '@app' -%}
                {% render block %}
              {% when 'title' %}
                {% render 'product-title', product: product, block: block, section: section %}
              {% when 'price' %}
                {% render 'product-price', product: product, block: block, section: section %}
              {% when 'add-buttons' %}
                {% render 'product-buttons' product: product, uniq_id: product_form_id, block: block %}
              {% when 'quantity' %}
                {% render 'product-quantity' product: product, uniq_id: product_form_id, block: block %}
              {% when 'variant-selectors' %}
                {% render 'product-variant-options' product: product, uniq_id: product_form_id, block: block %}
              {% when 'siblings' %}
                {% render 'product-siblings' product: product, uniq_id: product_form_id, block: block %}
              {% when 'custom-buttons' %}
                <div class="product__block__custom-buttons" style="--PB: {{ block.settings.padding_bottom }}px;" {{ block.shopify_attributes }}>
                  <div class="product__block__custom-buttons__wrapper">
                    {% if block.settings.link_text != blank and block.settings.link != blank %}
                      <a class="{{ block.settings.button_color }} {{ block.settings.button_style }} btn--large" href="{{ block.settings.link }}">
                        {{ block.settings.link_text | escape }}
                      </a>
                    {% endif %}
                    {% if block.settings.link_text_2 != blank and block.settings.link_2 != blank %}
                      <a class="{{ block.settings.button_color_2 }} {{ block.settings.button_style_2 }} btn--large" href="{{ block.settings.link_2 }}">
                        {{ block.settings.link_text_2 | escape }}
                      </a>
                    {% endif %}
                  </div>
                  {% if block.settings.text_link_text != blank and block.settings.text_link_url != blank %}
                    <div class="product__block__custom-buttons__text-link text-center">
                      <a href="{{ block.settings.text_link_url }}" {% if block.settings.enable_comparison_popup %}data-comparison-popup-trigger="comparison-popup-{{ section.id }}-{{ block.id }}"{% endif %}>{{ block.settings.text_link_text }}</a>
                    </div>
                  {% endif %}
                  
                  {% if block.settings.enable_comparison_popup %}
                    <!-- Popup Overlay -->
                    <div id="comparison-popup-{{ section.id }}-{{ block.id }}" class="comparison-popup-overlay">
                      <div class="comparison-popup">
                        <button class="comparison-popup-close" aria-label="Close">
                          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M19 5L5 19M5 5L19 19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                          </svg>
                        </button>
                        
                        <div class="comparison-popup-content">
                          {% assign first_product = all_products[block.settings.product_1] %}
                          {% assign second_product = all_products[block.settings.product_2] %}
                          
                          {% if first_product and second_product %}
                            <h2 class="comparison-title">COMPARE MODELS</h2>
                            <div class="comparison-table">
                              <div class="comparison-header">
                                <!-- Column for feature names - left empty in header -->
                                <div class="feature-column"></div>
                                <!-- Product name columns -->
                                <div class="product-column">{{ first_product.metafields.comparison.titlename | default: first_product.title }}</div>
                                <div class="product-column">{{ second_product.metafields.comparison.titlename | default: second_product.title }}</div>
                              </div>
                              
                              {% assign feature_names = "SafeCoilâ„¢ Technology,Rigid LATCH Connection,BioArkâ„¢ Side Impact Protection,Load Leg,Anti-Rebound Bar,Magnetic straps,Quick Lock Chest Clip,No Rethread Harness,9 Recline Positions,No Expiration Date,Guiding Lights,App Connectivity & Notifications" | split: ',' %} 
                              {% assign metafield_keys = "safecoil,rigid,bioark,supportleg,rebound,magneticstraps,quick_lock_chest_clip,no_rethread_headrest,9_recline_positions,no_expiration_date,guiding_lights,app_connectivity" | split: ',' %}
                              
                              <!-- Feature comparison rows -->
                              {% for i in (0..feature_names.size) %}
                                {% assign feature_name = feature_names[i] %}
                                {% assign metafield_key = metafield_keys[i] %}
                                {% if feature_name != blank and metafield_key != blank %}
                                  <div class="comparison-row">
                                    <!-- Feature name - left column -->
                                    <div class="feature-name">{{ feature_name }}</div>
                                    
                                    <!-- First product checkmark -->
                                    <div class="check-mark">
                                      {% if first_product.metafields.comparison[metafield_key] == 'true' or first_product.metafields.comparison[metafield_key] == true %}
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                          <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z" fill="currentColor"/>
                                        </svg>
                                      {% else %}
                                        <span class="dash">â€”</span>
                                      {% endif %}
                                    </div>
                                    
                                    <!-- Second product checkmark -->
                                    <div class="check-mark">
                                      {% if second_product.metafields.comparison[metafield_key] == 'true' or second_product.metafields.comparison[metafield_key] == true %}
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                          <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z" fill="currentColor"/>
                                        </svg>
                                      {% else %}
                                        <span class="dash">â€”</span>
                                      {% endif %}
                                    </div>
                                  </div>
                                {% endif %}
                              {% endfor %}
                              
                              <!-- Price row -->
                              <div class="comparison-row price-row">
                                <div class="feature-name">Price</div>
                                <div class="price">{{ first_product.price | money_without_trailing_zeros }}</div>
                                <div class="price">{{ second_product.price | money_without_trailing_zeros }}</div>
                              </div>
                            </div>
                          {% else %}
                            <p class="comparison-no-products">Please select products to compare in the theme editor.</p>
                          {% endif %}
                        </div>
                      </div>
                    </div>
                  {% endif %}
                </div>
              {% when 'subscription' %}
                {%- if block.settings.subscriptions_enable_selectors -%}
                  {% render 'product-subscription' product: product, uniq_id: product_form_id, block: block %}
                {%- endif -%}
              {% when 'size-remaining' %}
                {% render 'product-size-and-remaining' product: product, block: block %}
              {% when 'description' %}
                <div class="product__block__description rte body-size-4" style="--PB: {{ block.settings.padding_bottom }}px;" {{ block.shopify_attributes }}>
                  {%- assign product_description_content = product.description | strip -%}
                  {%- assign truncate_string = 'products.general.read_more' | t -%}
                  {%- assign truncate_html = '<button type="button" class="p button-with-underline" data-truncated-button>' | append: truncate_string | append: '</button>' -%}

                  {%- if block.settings.style == 'none' -%}
                    {% if block.settings.read_more %}
                      <div class="product-description__holder product-description__holder--truncate" data-truncated-holder>
                        <div class="product-description__inner">
                          <div class="product-description__content" data-truncated-content="product-description__content--truncate">
                            {{ product_description_content }}
                          </div>
                        </div>

                        <div class="product-description__actions">
                          {{ truncate_html }}
                        </div>
                      </div>
                    {% else %}
                      {{ product.description }}
                    {% endif %}
                  {% else %}
                    <div class="tabs-wrapper">
                      {% render 'product-tabs', section: section, block: block, product: product, product_description_content: product_description_content, truncate_html: truncate_html %}
                    </div>
                  {%- endif -%}
                </div>
              {% when 'sharing' %}
                <div class="product__block__share {{ block.settings.target_device }}" style="--PB: {{ block.settings.padding_bottom }}px;" {{ block.shopify_attributes }}>
                  {% render 'share' product: product, label: block.settings.share_label, block: block %}
                </div>
              {% when 'pickup' %}
                <div class="product__block__pickup" data-store-availability-container="{{ product.selected_or_first_available_variant.id }}" style="--PB: {{ block.settings.padding_bottom }}px;" {{ block.shopify_attributes }}></div>
              {% when 'text' %}
                {% if block.settings.title != '' %}
                  <div class="product__block__text" style="--PB: {{ block.settings.padding_bottom }}px;" {{ block.shopify_attributes }}>
                    {{ block.settings.title }}
                  </div>
                {% endif %}
              {% when 'vendor' %}
                {% if product.vendor %}
                  <div class="product__block__text" style="--PB: {{ block.settings.padding_bottom }}px;" {{ block.shopify_attributes }}>
                    {% if block.settings.add_vendor_link %}
                      <p><a href="{{ product.vendor | url_for_vendor }}" class="product__form__link">{{ product.vendor }}</a></p>
                    {%- else -%}
                      <p class="product__form__link">{{ product.vendor }}</p>
                    {% endif %}
                  </div>
                {% endif %}
              {% when 'spacer' %}
                <div class="product__block__spacer {{ block.settings.target_device }}" style="--PT: {{ block.settings.padding_top }}px; --PB: {{ block.settings.padding_bottom }}px;" {{ block.shopify_attributes }}>
                  {% if block.settings.show_line %}<hr class="hr--none">{% endif %}
                </div>
              {% when 'liquid' %}
                {{ block.settings.custom_liquid }}
              {% when 'upsell' %}
                <div class="product__block__upsell" style="--PB: {{ block.settings.padding_bottom }}px;" {{ block.shopify_attributes }}>
                  {% case block.settings.upsell_type %}
                    {% when 'product_single' %}
                      {%- assign upsell_product_first = all_products[block.settings.product] -%}
                    {% when 'product_grouping' %}
                      {%- assign upsell_product_first = block.settings.upsell_product_list | first -%}
                  {% endcase %}

                  {% comment %} Check for empty metafield references, but show a blankslate for them in the theme editor {% endcomment %}
                  {%- if upsell_product_first and upsell_product_first.title != '' and upsell_product_first.selected_or_first_available_variant != nil -%}

                    <div class="upsell__holder">
                      <div class="upsell__holder__title">
                        <h2 class="upsell__holder__title__text">
                          {{ block.settings.title }}
                        </h2>
                      </div>

                      {% case block.settings.upsell_type %}
                        {% when 'product_single' %}
                          {% render 'product-clip', card_product: upsell_product_first %}
                        {% when 'product_grouping' %}
                          {%- for upsell_product in block.settings.upsell_product_list limit: block.settings.upsell_list_limit -%}
                            {% render 'product-clip', card_product: upsell_product %}
                          {%- endfor -%}
                      {% endcase %}
                    </div>

                  {%- elsif request.design_mode -%}
                    <div class="upsell__holder">
                      <div class="upsell__holder__title">
                        <h2 class="upsell__holder__title__text">
                          {{ block.settings.title }}
                        </h2>
                      </div>
                        {% render 'onboarding-product-clip' %}
                    </div>
                  {%- endif -%}
                </div>

              {% when 'complimentary' %}
                <div style="--PB: {{ block.settings.padding_bottom }}px;" {{ block.shopify_attributes }}>
                  <div class="upsell__holder js-unloaded" data-product-complimentary-loaded>
                    <div class="upsell__holder__title">
                      <h2 class="upsell__holder__title__text">
                        {{ block.settings.title }}
                      </h2>
                    </div>

                    <product-complimentary data-url="{{ routes.product_recommendations_url }}?section_id=api-product-upsell-item&product_id={{ product.id }}&limit={{ block.settings.complimentary_list_limit }}&intent=complementary">
                    </product-complimentary>
                  </div>
                </div>
              {% when 'icon' %}
                {% assign image = block.settings.image %}

                <div class="product__block__icon" style="--PB: {{ block.settings.padding_bottom }}px;" {{ block.shopify_attributes }}>
                  <div class="icon-holder" style="--ICON-SIZE: {{ block.settings.icon_size }}px; --ICON-STROKE-COLOR: {{ block.settings.icon_color }};">
                    {%- if image -%}
                      {% liquid
                        assign icon_size = block.settings.icon_size | default: 16
                        assign icon_width = icon_size
                        assign icon_width_retina = icon_width | times: 2
                        assign icon_sizes = icon_width | append: 'px'
                        assign icon_widths = icon_width | append: ', ' | append: icon_width_retina
                      %}

                      {% capture srcset %}
                        {{ image | image_url: width: icon_width_retina }} 2x,
                        {{ image | image_url: width: icon_width }}
                      {% endcapture %}

                      {%- render 'image' img_object: image, srcset: srcset, width: icon_width -%}
                    {%- else -%}
                      {%- render 'icon-setting', filename: block.settings.icon_name -%}
                    {%- endif -%}
                  </div>

                  <p>{{ block.settings.text | remove: '<p>' | remove: '</p>' }}</p>
                </div>
                {% when 'icon-delivery' %}
                  {% assign image = block.settings.image-delivery %}
  
                  <div class="product__block__icon delivery-info {{ block.settings.alignment_delivery }}" style="--PB: {{ block.settings.padding_bottom_delivery }}px;" {{ block.shopify_attributes }}>
                    {% unless block.settings.hide_icon_delivery %}
                      <div class="icon-holder" style="--ICON-SIZE: {{ block.settings.icon_size_delivery }}px; --ICON-STROKE-COLOR: {{ block.settings.icon_color_delivery }};">
                        {%- if image -%}
                          {% liquid
                            assign icon_size = block.settings.icon_size_delivery | default: 16
                            assign icon_width = icon_size
                            assign icon_width_retina = icon_width | times: 2
                            assign icon_sizes = icon_width | append: 'px'
                            assign icon_widths = icon_width | append: ', ' | append: icon_width_retina
                          %}
    
                          {% capture srcset %}
                            {{ image | image_url: width: icon_width_retina }} 2x,
                            {{ image | image_url: width: icon_width }}
                          {% endcapture %}
    
                          {%- render 'image' img_object: image, srcset: srcset, width: icon_width -%}
                        {%- else -%}
                          {%- render 'icon-setting', filename: block.settings.icon_name_delivery -%}
                        {%- endif -%}
                      </div>
                    {% endunless %}
  
                    <p>{{ block.settings.text-delivery | remove: '<p>' | remove: '</p>' }}</p>
                  </div>
              {% when 'new-icon-text' %}
                <div class="product__block__new-icon-text {{ block.settings.icon_location }} {{ block.settings.text_align }}" 
                     style="--PB: {{ block.settings.padding_bottom }}px; --BG-COLOR: {{ block.settings.background_color }}; --BORDER-RADIUS: {{ block.settings.border_radius }}px; --ICON-SIZE: {{ block.settings.icon_size }}px; --ICON-STROKE-COLOR: {{ block.settings.icon_color }}; --FONT-SIZE-DESKTOP: {{ block.settings.font_size_desktop }}px; --FONT-SIZE-MOBILE: {{ block.settings.font_size_mobile }}px;" 
                     {{ block.shopify_attributes }}>
                  <div class="new-icon-text-content">
                    {% unless block.settings.hide_icon %}
                      <div class="icon-holder">
                        {%- if block.settings.image -%}
                          {% liquid
                            assign icon_size = block.settings.icon_size | default: 16
                            assign icon_width = icon_size
                            assign icon_width_retina = icon_width | times: 2
                            assign icon_sizes = icon_width | append: 'px'
                            assign icon_widths = icon_width | append: ', ' | append: icon_width_retina
                          %}

                          {% capture srcset %}
                            {{ block.settings.image | image_url: width: icon_width_retina }} 2x,
                            {{ block.settings.image | image_url: width: icon_width }}
                          {% endcapture %}

                          {%- render 'image' img_object: block.settings.image, srcset: srcset, width: icon_width -%}
                        {%- elsif block.settings.icon_name != blank -%}
                          {%- render 'icon-setting', filename: block.settings.icon_name -%}
                        {%- endif -%}
                      </div>
                    {% endunless %}
                    
                    <div class="text-content">
                      {% if block.settings.text != blank %}
                        <p>
                          {{ block.settings.text | remove: '<p>' | remove: '</p>' }}
                          {% if block.settings.link_text != blank and block.settings.link_url != blank %}
                            <a href="{{ block.settings.link_url }}" class="inline-link">{{ block.settings.link_text }}</a>
                          {% endif %}
                        </p>
                      {% elsif block.settings.link_text != blank and block.settings.link_url != blank %}
                        <p>
                          <a href="{{ block.settings.link_url }}" class="inline-link">{{ block.settings.link_text }}</a>
                        </p>
                      {% endif %}
                    </div>
                  </div>
                </div>
              {% when 'icon-list' %}
                <div class="product__block__icon-list {{ block.settings.layout_style }} {{ block.settings.icon_position }}" style="--PB: {{ block.settings.padding_bottom }}px;" {{ block.shopify_attributes }}>
                  <div class="icon-list-wrapper" style="--ICON-SIZE: {{ block.settings.icon_size }}px; --ICON-STROKE-COLOR: {{ block.settings.icon_color }};">
                    {% for i in (1..5) %}
                      {% assign icon_name_key = 'icon_name_' | append: i %}
                      {% assign image_key = 'image_' | append: i %}
                      {% assign text_key = 'text_' | append: i %}
                      
                      {% assign current_icon = block.settings[icon_name_key] %}
                      {% assign current_image = block.settings[image_key] %}
                      {% assign current_text = block.settings[text_key] %}
                      {% assign current_text_stripped = current_text | strip_html | strip %}
                      
                      {% if current_text_stripped != blank %}
                        <div class="icon-list-item">
                          <div class="icon-holder">
                            {%- if current_image -%}
                              {% liquid
                                assign icon_size = block.settings.icon_size | default: 16
                                assign icon_width = icon_size
                                assign icon_width_retina = icon_width | times: 2
                                assign icon_sizes = icon_width | append: 'px'
                                assign icon_widths = icon_width | append: ', ' | append: icon_width_retina
                              %}

                              {% capture srcset %}
                                {{ current_image | image_url: width: icon_width_retina }} 2x,
                                {{ current_image | image_url: width: icon_width }}
                              {% endcapture %}

                              {%- render 'image' img_object: current_image, srcset: srcset, width: icon_width -%}
                            {%- elsif current_icon != blank -%}
                              {%- render 'icon-setting', filename: current_icon -%}
                            {%- endif -%}
                          </div>
                          <div class="icon-text">
                            {{ current_text | remove: '<p>' | remove: '</p>' }}
                          </div>
                        </div>
                      {% endif %}
                    {% endfor %}
                  </div>
                </div>
              {% when 'image' %}
                <div class="product__block__image {{ block.settings.alignment }}" style="--PB: {{ block.settings.padding_bottom }}px;" {{ block.shopify_attributes }}>
                  <div style="max-width: {{ block.settings.image_max_limit | append: 'px' }};">
                    {% assign image_width = block.settings.image.width | at_most: block.settings.image_max_limit %}
                    {% assign image_width_2x = image_width | times: 2 %}

                    {% capture srcset %}
                      {{ block.settings.image | image_url: width: image_width_2x }} 2x,
                      {{ block.settings.image | image_url: width: image_width }}
                    {% endcapture %}

                    {%- render 'image' img_object: block.settings.image, srcset: srcset, width: image_width -%}
                  </div>
                </div>
              {% when 'outofstock-message' %}
                <style>
                  .outofstock-message__content {
                    font-size: 16px;
                    line-height: 1.4;
                    color: #000;
                  }
                  .outofstock-message__content p a{
                    color: #000;
                    text-decoration: underline;
                  }
                </style>
                <div class="product__block__outofstock-message" style="--PB: {{ block.settings.padding_bottom }}px;" {{ block.shopify_attributes }}>
                  <div id="outofstock-message-{{ section.id }}" class="outofstock-message" style="display: none;">
                    <div class="outofstock-message__container">
                      <div class="outofstock-message__content">
                        {% if block.settings.message != blank %}
                          {{ block.settings.message }}
                        {% else %}
                          <p>Contact customer service to find a retail location near you with this color in stock</p>
                        {% endif %}
                      </div>
                    </div>
                  </div>
                </div>
              {% when 'related-cards' %}
                <div class="product__block__related-cards" style="--PB: {{ block.settings.padding_bottom }}px;--PT: {{ block.settings.padding_bottom }}px;" {{ block.shopify_attributes }}>
                  {% if block.settings.title != blank %}
                    <h3 class="related-cards-title">{{ block.settings.title }}</h3>
                  {% endif %}
                  
                  <div class="related-cards-wrapper">
                    {%- for i in (1..5) -%}
                      {%- case i -%}
                        {%- when 1 -%}
                          {%- assign selected_product = block.settings.product_1 -%}
                          {%- assign enable_atc = block.settings.enable_add_to_cart_1 -%}
                        {%- when 2 -%}
                          {%- assign selected_product = block.settings.product_2 -%}
                          {%- assign enable_atc = block.settings.enable_add_to_cart_2 -%}
                        {%- when 3 -%}
                          {%- assign selected_product = block.settings.product_3 -%}
                          {%- assign enable_atc = block.settings.enable_add_to_cart_3 -%}
                        {%- when 4 -%}
                          {%- assign selected_product = block.settings.product_4 -%}
                          {%- assign enable_atc = block.settings.enable_add_to_cart_4 -%}
                        {%- when 5 -%}
                          {%- assign selected_product = block.settings.product_5 -%}
                          {%- assign enable_atc = block.settings.enable_add_to_cart_5 -%}
                      {%- endcase -%}
                      
                      {%- if selected_product and selected_product.id -%}
                        {% render 'related-card', product: selected_product, enable_add_to_cart: enable_atc %}
                      {%- endif -%}
                    {%- endfor -%}
                  </div>
                </div>
            {% endcase %}
          {% endfor %}

          {%- comment -%}
            Render and hide the <product-form> when there is no 'add-buttons' block
            so the variants JS functionality won't break
          {%- endcomment -%}
          {%- assign add_buttons_block = section.blocks | where: 'type', 'add-buttons' | first -%}
          {%- if add_buttons_block == nil -%}
            {% render 'product-buttons' product: product, uniq_id: product_form_id, hidden: true %}
          {%- endif -%}
        </div>
      </div>
    </div>
  </div>
</div>

{% render 'product-info', product: product %}

{% if section.settings.zoom_enable %}
  {% render 'zoom-pswp' %}
{% endif %}

<script type="application/json" id="ModelJson-{{ section.id }}">
  {{ product.media | where: 'media_type', 'model' | json }}
</script>

<script type="application/json" id="VariantOutofstockJson-{{ section.id }}">
  {
    "variants": [
      {%- for variant in product.variants -%}
        {
          "id": {{ variant.id | json }},
          "available": {{ variant.available | json }},
          "outofstock_message": {% if variant.metafields.custom.outofstockmsg %}true{% else %}false{% endif %}
        }{% unless forloop.last %},{% endunless %}
      {%- endfor -%}
    ]
  }
</script>

</div>

{% comment %} Google wants to know when to check your price again {% endcomment %}
{%- liquid
  assign days_price_is_valid = 1
  assign seconds_in_a_day = 86400
  assign seconds_price_valid = days_price_is_valid | times: seconds_in_a_day

  if product.selected_or_first_available_variant.featured_media
    assign seo_media = product.selected_or_first_available_variant.featured_media
  else
    assign seo_media = product.featured_media
  endif
-%}
<script type="application/ld+json">
{
  "@context": "http://schema.org/",
  "@type": "Product",
  "name": {{ product.title | json }},
  "url": {{ request.origin | append: product.url | json }},
  {% if seo_media -%}
    "image": [
      {{ seo_media | image_url: width: 1920 | prepend: "https:" | json }}
    ],
  {%- endif %}
  "description": {{ product.description | strip_html | json }},
  {% if product.selected_or_first_available_variant.sku != blank -%}
    "sku": {{ product.selected_or_first_available_variant.sku | json }},
  {%- endif %}
  "category": {{ product.type | json }},
  {%- if product.metafields.reviews.rating.value != blank -%}
    "aggregateRating": {
      "@type": "AggregateRating",
      "ratingValue": "{{ product.metafields.reviews.rating.value }}",
      "ratingCount": "{{ product.metafields.reviews.rating_count.value }}",
      "bestRating": "{{ product.metafields.reviews.rating.value.scale_max }}",
      "worstRating": "{{ product.metafields.reviews.rating.value.scale_min }}"
    },
  {%- endif -%}
  "brand": {
    "@type": "Brand",
    "name": {{ product.vendor | default: shop.name | json }}
  },
  "offers": [
    {%- for variant in product.variants -%}
      {
        "@type" : "Offer",
        {%- if variant.sku != blank -%}
          "sku": {{ variant.sku | json }},
        {%- endif -%}
        {%- if variant.barcode.size == 12 -%}
          "gtin12": {{ variant.barcode | json }},
        {%- endif -%}
        {%- if variant.barcode.size == 13 -%}
          "gtin13": {{ variant.barcode | json }},
        {%- endif -%}
        {%- if variant.barcode.size == 14 -%}
          "gtin14": {{ variant.barcode | json }},
        {%- endif -%}
        "availability" : "http://schema.org/{% if variant.available %}InStock{% else %}OutOfStock{% endif %}",
        "price" : {{ variant.price | divided_by: 100.00 | json }},
        "priceCurrency" : {{ cart.currency.iso_code | json }},
        "priceValidUntil": "{{ 'now' | date: '%s' | plus: seconds_price_valid | date: '%Y-%m-%d' }}",
        "url" : {{ request.origin | append: variant.url | json }}
      }{% unless forloop.last %},{% endunless %}
    {%- endfor -%}
  ]
}
</script>


{% schema %}
{
  "name": "Product page",
  "settings": [
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "select",
      "id": "layout",
      "label": "Desktop layout",
      "default": "thumbnails-below@slides",
      "options": [
        { "value": "none@single", "label": "Stacked"},
        { "value": "none@columns", "label": "Grid"},
        { "value": "none@mosaic", "label": "Mosaic"},
        { "value": "thumbnails-left@slides", "label": "Showcase with vertical thumbnails"},
        { "value": "thumbnails-below@slides", "label": "Showcase with horizontal thumbnails"}
      ]
    },
    {
      "type": "select",
      "id": "image_width",
      "label": "Image width",
      "default": "wide",
      "options": [
         { "value": "wide", "label": "Wide"},
         { "value": "half", "label": "Half"}
      ]
    },
    {
      "type": "range",
      "id": "image_spacing",
      "min": 0,
      "max": 50,
      "step": 1,
      "unit": "px",
      "label": "Image spacing",
      "default": 10
    },
    {
      "type": "select",
      "id": "align",
      "label": "Text alignment",
      "default": "left",
      "options": [
         { "value": "center", "label": "Center"},
         { "value": "left", "label": "Left"}
      ]
    },
    {
      "type": "select",
      "id": "bg",
      "label": "Background color",
      "default": "palette--light bg--neutral",
      "options": [
        { "value": "palette--light bg--neutral", "label": "Default"},
        { "value": "palette--light bg--accent", "label": "Light"},
        { "value": "palette--dark bg--invert", "label": "Dark"},
        { "value": "palette--dark bg--invert--accent", "label": "Dark accent"},
        { "value": "palette--bright bg--bright", "label": "Bright"},
        { "value": "palette--bright bg--bright--accent", "label": "Bright accent"}
      ]
    },
    {
      "type": "header",
      "content": "Mobile layout"
    },
    {
      "type": "select",
      "id": "mobile_layout",
      "label": "Mobile layout",
      "default": "carousel",
      "options": [
        { "value": "carousel", "label": "Carousel"},
        { "value": "slideshow", "label": "Showcase without thumbnails"},
        { "value": "thumbs", "label": "Showcase with horizontal thumbnails"}
      ]
    },
    {
      "type": "header",
      "content": "Media",
      "info": "Learn more about [media types](https://help.shopify.com/manual/products/product-media)"
    },
    {
      "type": "checkbox",
      "id": "enable_video_looping",
      "label": "Enable video looping",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "zoom_enable",
      "label": "Enable image zoom",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "alt_text_enable",
      "label": "Enable alt-text toggle",
      "default": true
    },
    {
      "type": "select",
      "id": "alt_text_icon",
      "label": "Alt-text toggle icon",
      "default": "icon-ruler",
      "options": [
        { "value": "icon-animal", "label": "Animal" },
        { "value": "icon-animal-paw", "label": "Animal paw" },
        { "value": "icon-award", "label": "Award" },
        { "value": "icon-basket-like", "label": "Basket like" },
        { "value": "icon-basket-return", "label": "Basket return" },
        { "value": "icon-cart-check", "label": "Cart check" },
        { "value": "icon-cart-message", "label": "Cart message" },
        { "value": "icon-chat", "label": "Chat" },
        { "value": "icon-dollar", "label": "Dollar" },
        { "value": "icon-earth", "label": "Earth" },
        { "value": "icon-email", "label": "Email" },
        { "value": "icon-gluten-free", "label": "Gluten free" },
        { "value": "icon-iron", "label": "Iron" },
        { "value": "icon-leaf", "label": "Leaf" },
        { "value": "icon-legal", "label": "Legal" },
        { "value": "icon-lock-card", "label": "Lock card" },
        { "value": "icon-lock-shield", "label": "Lock shield" },
        { "value": "icon-lock-window", "label": "Lock window" },
        { "value": "icon-payment", "label": "Payment" },
        { "value": "icon-phone", "label": "Phone" },
        { "value": "icon-rating", "label": "Rating" },
        { "value": "icon-star-rating", "label": "Rating star" },
        { "value": "icon-recycled", "label": "Recycled" },
        { "value": "icon-ruler", "label": "Ruler" },
        { "value": "icon-send", "label": "Send" },
        { "value": "icon-sewing-machine", "label": "Sewing machine" },
        { "value": "icon-shipment-world", "label": "Shipment world" },
        { "value": "icon-shipment", "label": "Shipment" },
        { "value": "icon-shoes", "label": "Shoes" },
        { "value": "icon-store", "label": "Store" },
        { "value": "icon-support-headphones", "label": "Support headphones" },
        { "value": "icon-thread", "label": "Thread" },
        { "value": "icon-truck", "label": "Truck" },
        { "value": "icon-washer", "label": "Washer" },
        { "value": "icon-water", "label": "Water" }
      ]
    },
    {
      "type": "header",
      "content": "Breadcrumbs"
    },
    {
      "type": "checkbox",
      "id": "product_breadcrumbs_enable",
      "label": "Show breadcrumbs",
      "default": false
    },
    {
      "type": "collection_list",
      "id": "product_breadcrumbs_list",
      "label": "Breadcrumb collections",
      "info": "Use metafields for unique breadcrumbs on each product. [Learn more](https://groupthought.com/link/pipeline/docs/breadcrumbs)"
    },
    {
      "type": "header",
      "content": "Section spacing"
    },
    {
      "type": "select",
      "id": "width",
      "label": "Width",
      "default": "wrapper",
      "options": [
        { "value": "wrapper--none", "label": "Full width" },
        { "value": "wrapper--full", "label": "Full width padded" },
        { "value": "wrapper", "label": "Page width" }
      ]
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 180,
      "step": 2,
      "unit": "px",
      "label": "Padding top",
      "default": 24
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 180,
      "step": 2,
      "unit": "px",
      "label": "Padding bottom",
      "default": 36
    },
    {
      "type": "header",
      "content": "Sticky Add to Cart"
    },
    {
      "type": "checkbox",
      "id": "enable_sticky_desktop",
      "label": "Enable sticky add to cart on desktop",
      "default": false,
      "info": "Shows sticky add to cart bar at top when main button is out of viewport"
    },
    {
      "type": "checkbox",
      "id": "enable_sticky_mobile",
      "label": "Enable sticky add to cart on mobile",
      "default": false,
      "info": "Shows sticky add to cart bar at bottom when main button is out of viewport"
    }
  ],
  "blocks": [
    {
      "type": "@app"
    },
    {
      "type": "variant-selectors",
      "name": "Variant options",
      "limit": 1,
      "settings": [
        {
          "type": "paragraph",
          "content": "Variant styles are in the global 'Theme settings' under 'Product form'."
        },
        {
          "type": "range",
          "id": "option_size_swatch",
          "min": 20,
          "max": 100,
          "step": 2,
          "unit": "px",
          "label": "Color swatch size",
          "default": 34
        },
        {
          "type": "range",
          "id": "option_size_radio",
          "min": 20,
          "max": 100,
          "step": 2,
          "unit": "px",
          "label": "Radio button height",
          "default": 50
        },
        {
          "type": "header",
          "content": "Variant image swatches"
        },
        {
          "type": "checkbox",
          "id": "use_variant_image_swatches",
          "label": "Use variant images for color swatches",
          "default": false,
          "info": "Show variant images instead of color swatches for color options"
        },
        {
          "type": "range",
          "id": "image_swatch_width",
          "min": 30,
          "max": 120,
          "step": 2,
          "unit": "px",
          "label": "Image swatch width",
          "default": 60
        },
        {
          "type": "select",
          "id": "image_swatch_aspect_ratio",
          "label": "Image swatch aspect ratio",
          "default": "1/1",
          "options": [
            { "value": "1/1", "label": "1:1 Square" },
            { "value": "16/9", "label": "16:9 Landscape" },
            { "value": "9/16", "label": "9:16 Portrait" },
            { "value": "4/3", "label": "4:3 Standard" }
          ]
        },
        {
          "type": "header",
          "content": "Block spacing"
        },
        {
          "type": "range",
          "id": "option_space",
          "min": 0,
          "max": 100,
          "step": 2,
          "unit": "px",
          "label": "Space between options",
          "default": 30
        },
        {
          "type": "range",
          "id": "padding_bottom",
          "min": 0,
          "max": 100,
          "step": 2,
          "unit": "px",
          "label": "Padding bottom",
          "default": 30
        }
      ]
    },
    {
      "type": "quantity",
      "name": "Quantity",
      "limit": 1,
      "settings": [
        {
          "type": "checkbox",
          "id": "show_quantity",
          "label": "Show quantity selection",
          "default": true
        },
        {
          "type": "header",
          "content": "Block spacing"
        },
        {
          "type": "range",
          "id": "padding_bottom",
          "min": 0,
          "max": 100,
          "step": 2,
          "unit": "px",
          "label": "Padding bottom",
          "default": 20
        }
      ]
    },
    {
      "type": "add-buttons",
      "name": "Form buttons",
      "limit": 1,
      "settings": [
        {
          "type": "checkbox",
          "id": "enable_payment_button",
          "label": "Show dynamic checkout button",
          "info": "Lets customers check out directly using a familiar payment method. [Learn More](https://help.shopify.com/manual/using-themes/change-the-layout/dynamic-checkout)",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "enable_gift_card_recipient",
          "label": "Show recipient information form for gift card products",
          "default": true,
          "info": "Gift card products can optionally be sent direct to a recipient along with a personal message."
        },
        {
          "type": "header",
          "content": "Block spacing"
        },
        {
          "type": "range",
          "id": "padding_bottom",
          "min": 0,
          "max": 100,
          "step": 2,
          "unit": "px",
          "label": "Padding bottom",
          "default": 20
        }
      ]
    },

    {
      "type": "size-remaining",
      "name": "Sizes and remaining",
      "limit": 1,
      "settings": [
        {
          "type": "header",
          "content": "Size popup"
        },
        {
          "id": "info_page",
          "type": "page",
          "label": "Content"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "info": "Defaults to page title"
        },
        {
          "type": "header",
          "content": "Inventory message"
        },
        {
          "type": "checkbox",
          "id": "show_remaining",
          "label": "Show inventory message",
          "default": true
        },
        {
          "type": "select",
          "id": "show_remaining_style",
          "label": "Style",
          "default": "low",
          "options": [
            { "value": "low", "label": "Show when low"},
            { "value": "always", "label": "Show always" }
          ]
        },
        {
          "type": "range",
          "id": "countdown",
          "label": "Inventory countdown",
          "min": 1,
          "max": 50,
          "step": 1,
          "default": 10
        },
        {
          "type": "header",
          "content": "Block spacing"
        },
        {
          "type": "range",
          "id": "padding_bottom",
          "min": 0,
          "max": 100,
          "step": 2,
          "unit": "px",
          "label": "Padding bottom",
          "default": 0
        }
      ]
    },
    {
      "type": "subscription",
      "name": "Subscriptions",
      "limit": 1,
      "settings": [
        {
          "type": "header",
          "content": "Subscriptions",
          "info": "Learn more about [subscriptions](https://help.shopify.com/en/manual/products/subscriptions)"
        },
        {
          "type": "checkbox",
          "id": "subscriptions_enable_selectors",
          "label": "Enable subscription selectors",
          "info": "Shown on products with subscription options",
          "default": true
        },
        {
          "type": "header",
          "content": "Block spacing"
        },
        {
          "type": "range",
          "id": "padding_bottom",
          "min": 0,
          "max": 100,
          "step": 2,
          "unit": "px",
          "label": "Padding bottom",
          "default": 20
        }
      ]
    },
    {
      "type": "siblings",
      "name": "Siblings",
      "settings": [
        {
          "type": "paragraph",
          "content": "Siblings allow you to split colors into separate products. [Learn more](https://groupthought.com/link/pipeline/docs/siblings)"
        },
        {
          "type": "text",
          "id": "siblings_collection",
          "label": "Product siblings collection handle",
          "info": "Use a metafield containing a collection handle for color siblings.  The collection should contain all color options as unique products."
        },
        {
          "type": "text",
          "id": "cutline",
          "label": "Product color metafield",
          "info": "Use a single line text metafield called 'theme.cutline' for product color."
        },
        {
          "type": "range",
          "id": "option_size_sibling",
          "min": 20,
          "max": 120,
          "step": 2,
          "unit": "px",
          "label": "Sibling size",
          "default": 50
        },
        {
          "type": "header",
          "content": "Block spacing"
        },
        {
          "type": "range",
          "id": "padding_bottom",
          "min": 0,
          "max": 100,
          "step": 2,
          "unit": "px",
          "label": "Padding bottom",
          "default": 20
        }
      ]
    },
    {
      "type": "description",
      "name": "Product description",
      "limit": 2,
      "settings": [
        {
          "type": "select",
          "id": "style",
          "label": "Layout",
          "default": "accordions",
          "options": [
            { "value": "none", "label": "None" },
            { "value": "tabs", "label": "Tabs" },
            { "value": "accordions", "label": "Accordions" }
          ],
          "info": "Add tab content below. Lean more about [product tabs](https://groupthought.com/link/pipeline/docs/tabs)"
        },
        {
          "type": "header",
          "content": "Custom first section"
        },
        {
          "type": "checkbox",
          "id": "enable_custom_first",
          "label": "Enable custom first section",
          "default": false,
          "info": "Add a custom section that appears first in tabs/accordions"
        },
        {
          "type": "text",
          "id": "custom_first_title",
          "label": "Custom section heading",
          "default": "Custom Section"
        },
        {
          "type": "select",
          "id": "custom_first_icon",
          "label": "Custom section icon",
          "default": "",
          "options": [
            { "value": "", "label": "No icon" },
            { "value": "icon-animal", "label": "Animal" },
            { "value": "icon-animal-paw", "label": "Animal paw" },
            { "value": "icon-award", "label": "Award" },
            { "value": "icon-basket-like", "label": "Basket like" },
            { "value": "icon-basket-return", "label": "Basket return" },
            { "value": "icon-cart-check", "label": "Cart check" },
            { "value": "icon-cart-message", "label": "Cart message" },
            { "value": "icon-chat", "label": "Chat" },
            { "value": "icon-dollar", "label": "Dollar" },
            { "value": "icon-earth", "label": "Earth" },
            { "value": "icon-email", "label": "Email" },
            { "value": "icon-gluten-free", "label": "Gluten free" },
            { "value": "icon-iron", "label": "Iron" },
            { "value": "icon-leaf", "label": "Leaf" },
            { "value": "icon-legal", "label": "Legal" },
            { "value": "icon-lock-card", "label": "Lock card" },
            { "value": "icon-lock-shield", "label": "Lock shield" },
            { "value": "icon-lock-window", "label": "Lock window" },
            { "value": "icon-payment", "label": "Payment" },
            { "value": "icon-phone", "label": "Phone" },
            { "value": "icon-rating", "label": "Rating" },
            { "value": "icon-star-rating", "label": "Rating star" },
            { "value": "icon-recycled", "label": "Recycled" },
            { "value": "icon-ruler", "label": "Ruler" },
            { "value": "icon-send", "label": "Send" },
            { "value": "icon-sewing-machine", "label": "Sewing machine" },
            { "value": "icon-shipment-world", "label": "Shipment world" },
            { "value": "icon-shipment", "label": "Shipment" },
            { "value": "icon-shoes", "label": "Shoes" },
            { "value": "icon-store", "label": "Store" },
            { "value": "icon-support-headphones", "label": "Support headphones" },
            { "value": "icon-thread", "label": "Thread" },
            { "value": "icon-truck", "label": "Truck" },
            { "value": "icon-washer", "label": "Washer" },
            { "value": "icon-water", "label": "Water" }
          ]
        },
        {
          "type": "richtext",
          "id": "custom_first_content",
          "label": "Custom section text",
          "default": "<p>This is a custom section that appears first in your tabs or accordions.</p>"
        },
        {
          "type": "header",
          "content": "Product description"
        },
        {
          "type": "checkbox",
          "id": "enable_description",
          "label": "Show description",
          "default": true,
          "info": "Show in accordions/tabs"
        },
        {
          "type": "checkbox",
          "id": "read_more",
          "label": "Enable read more",
          "default": true,
          "info": "Truncate the product description with an option to read more"
        },
        {
          "type": "select",
          "id": "icon_description",
          "label": "Icon description",
          "default": "",
          "options": [
            { "value": "", "label": "No icon" },
            { "value": "icon-animal", "label": "Animal" },
            { "value": "icon-animal-paw", "label": "Animal paw" },
            { "value": "icon-award", "label": "Award" },
            { "value": "icon-basket-like", "label": "Basket like" },
            { "value": "icon-basket-return", "label": "Basket return" },
            { "value": "icon-cart-check", "label": "Cart check" },
            { "value": "icon-cart-message", "label": "Cart message" },
            { "value": "icon-chat", "label": "Chat" },
            { "value": "icon-dollar", "label": "Dollar" },
            { "value": "icon-earth", "label": "Earth" },
            { "value": "icon-email", "label": "Email" },
            { "value": "icon-gluten-free", "label": "Gluten free" },
            { "value": "icon-iron", "label": "Iron" },
            { "value": "icon-leaf", "label": "Leaf" },
            { "value": "icon-legal", "label": "Legal" },
            { "value": "icon-lock-card", "label": "Lock card" },
            { "value": "icon-lock-shield", "label": "Lock shield" },
            { "value": "icon-lock-window", "label": "Lock window" },
            { "value": "icon-payment", "label": "Payment" },
            { "value": "icon-phone", "label": "Phone" },
            { "value": "icon-rating", "label": "Rating" },
            { "value": "icon-star-rating", "label": "Rating star" },
            { "value": "icon-recycled", "label": "Recycled" },
            { "value": "icon-ruler", "label": "Ruler" },
            { "value": "icon-send", "label": "Send" },
            { "value": "icon-sewing-machine", "label": "Sewing machine" },
            { "value": "icon-shipment-world", "label": "Shipment world" },
            { "value": "icon-shipment", "label": "Shipment" },
            { "value": "icon-shoes", "label": "Shoes" },
            { "value": "icon-store", "label": "Store" },
            { "value": "icon-support-headphones", "label": "Support headphones" },
            { "value": "icon-thread", "label": "Thread" },
            { "value": "icon-truck", "label": "Truck" },
            { "value": "icon-washer", "label": "Washer" },
            { "value": "icon-water", "label": "Water" }
          ]
        },
        {
          "type": "checkbox",
          "id": "description_expanded",
          "label": "Open by default",
          "default": true,
          "info": "Only applies to the accordion layout"
        },
        {
          "type": "header",
          "content": "Section 1"
        },
        {
          "type": "text",
          "id": "title_1",
          "label": "Tab heading",
          "default": "Information"
        },
        {
          "type": "select",
          "id": "icon_name_1",
          "label": "Icon",
          "default": "",
          "options": [
            { "value": "", "label": "No icon" },
            { "value": "icon-animal", "label": "Animal" },
            { "value": "icon-animal-paw", "label": "Animal paw" },
            { "value": "icon-award", "label": "Award" },
            { "value": "icon-basket-like", "label": "Basket like" },
            { "value": "icon-basket-return", "label": "Basket return" },
            { "value": "icon-cart-check", "label": "Cart check" },
            { "value": "icon-cart-message", "label": "Cart message" },
            { "value": "icon-chat", "label": "Chat" },
            { "value": "icon-dollar", "label": "Dollar" },
            { "value": "icon-earth", "label": "Earth" },
            { "value": "icon-email", "label": "Email" },
            { "value": "icon-gluten-free", "label": "Gluten free" },
            { "value": "icon-iron", "label": "Iron" },
            { "value": "icon-leaf", "label": "Leaf" },
            { "value": "icon-legal", "label": "Legal" },
            { "value": "icon-lock-card", "label": "Lock card" },
            { "value": "icon-lock-shield", "label": "Lock shield" },
            { "value": "icon-lock-window", "label": "Lock window" },
            { "value": "icon-payment", "label": "Payment" },
            { "value": "icon-phone", "label": "Phone" },
            { "value": "icon-rating", "label": "Rating" },
            { "value": "icon-star-rating", "label": "Rating star" },
            { "value": "icon-recycled", "label": "Recycled" },
            { "value": "icon-ruler", "label": "Ruler" },
            { "value": "icon-send", "label": "Send" },
            { "value": "icon-sewing-machine", "label": "Sewing machine" },
            { "value": "icon-shipment-world", "label": "Shipment world" },
            { "value": "icon-shipment", "label": "Shipment" },
            { "value": "icon-shoes", "label": "Shoes" },
            { "value": "icon-store", "label": "Store" },
            { "value": "icon-support-headphones", "label": "Support headphones" },
            { "value": "icon-thread", "label": "Thread" },
            { "value": "icon-truck", "label": "Truck" },
            { "value": "icon-washer", "label": "Washer" },
            { "value": "icon-water", "label": "Water" }
          ]
        },
        {
          "type": "richtext",
          "id": "raw_content_1",
          "label": "Tab text",
          "default": "<p>This content type will accept <strong>rich text</strong> to help with adding styles and links to additional pages or content. Use this to add supplementary information to help your buyers.</p>"
        },
        {
          "type": "header",
          "content": "Section 2"
        },
        {
          "type": "text",
          "id": "title_2",
          "label": "Tab heading",
          "default": "Details"
        },
        {
          "type": "select",
          "id": "icon_name_2",
          "label": "Icon",
          "default": "",
          "options": [
            { "value": "", "label": "No icon" },
            { "value": "icon-animal", "label": "Animal" },
            { "value": "icon-animal-paw", "label": "Animal paw" },
            { "value": "icon-award", "label": "Award" },
            { "value": "icon-basket-like", "label": "Basket like" },
            { "value": "icon-basket-return", "label": "Basket return" },
            { "value": "icon-cart-check", "label": "Cart check" },
            { "value": "icon-cart-message", "label": "Cart message" },
            { "value": "icon-chat", "label": "Chat" },
            { "value": "icon-dollar", "label": "Dollar" },
            { "value": "icon-earth", "label": "Earth" },
            { "value": "icon-email", "label": "Email" },
            { "value": "icon-gluten-free", "label": "Gluten free" },
            { "value": "icon-iron", "label": "Iron" },
            { "value": "icon-leaf", "label": "Leaf" },
            { "value": "icon-legal", "label": "Legal" },
            { "value": "icon-lock-card", "label": "Lock card" },
            { "value": "icon-lock-shield", "label": "Lock shield" },
            { "value": "icon-lock-window", "label": "Lock window" },
            { "value": "icon-payment", "label": "Payment" },
            { "value": "icon-phone", "label": "Phone" },
            { "value": "icon-rating", "label": "Rating" },
            { "value": "icon-star-rating", "label": "Rating star" },
            { "value": "icon-recycled", "label": "Recycled" },
            { "value": "icon-ruler", "label": "Ruler" },
            { "value": "icon-send", "label": "Send" },
            { "value": "icon-sewing-machine", "label": "Sewing machine" },
            { "value": "icon-shipment-world", "label": "Shipment world" },
            { "value": "icon-shipment", "label": "Shipment" },
            { "value": "icon-shoes", "label": "Shoes" },
            { "value": "icon-store", "label": "Store" },
            { "value": "icon-support-headphones", "label": "Support headphones" },
            { "value": "icon-thread", "label": "Thread" },
            { "value": "icon-truck", "label": "Truck" },
            { "value": "icon-washer", "label": "Washer" },
            { "value": "icon-water", "label": "Water" }
          ]
        },
        {
          "type": "richtext",
          "id": "raw_content_2",
          "label": "Tab text",
          "default": "<p>You can use product metafields to assign content to this tab that is unique to an individual product.  Use tabs to highlight unique features, sizing information, or other sales information.</p>"
        },
        {
          "type": "header",
          "content": "Section 3"
        },
        {
          "type": "text",
          "id": "title_3",
          "label": "Tab heading"
        },
        {
          "type": "select",
          "id": "icon_name_3",
          "label": "Icon",
          "default": "",
          "options": [
            { "value": "", "label": "No icon" },
            { "value": "icon-animal", "label": "Animal" },
            { "value": "icon-animal-paw", "label": "Animal paw" },
            { "value": "icon-award", "label": "Award" },
            { "value": "icon-basket-like", "label": "Basket like" },
            { "value": "icon-basket-return", "label": "Basket return" },
            { "value": "icon-cart-check", "label": "Cart check" },
            { "value": "icon-cart-message", "label": "Cart message" },
            { "value": "icon-chat", "label": "Chat" },
            { "value": "icon-dollar", "label": "Dollar" },
            { "value": "icon-earth", "label": "Earth" },
            { "value": "icon-email", "label": "Email" },
            { "value": "icon-gluten-free", "label": "Gluten free" },
            { "value": "icon-iron", "label": "Iron" },
            { "value": "icon-leaf", "label": "Leaf" },
            { "value": "icon-legal", "label": "Legal" },
            { "value": "icon-lock-card", "label": "Lock card" },
            { "value": "icon-lock-shield", "label": "Lock shield" },
            { "value": "icon-lock-window", "label": "Lock window" },
            { "value": "icon-payment", "label": "Payment" },
            { "value": "icon-phone", "label": "Phone" },
            { "value": "icon-rating", "label": "Rating" },
            { "value": "icon-star-rating", "label": "Rating star" },
            { "value": "icon-recycled", "label": "Recycled" },
            { "value": "icon-ruler", "label": "Ruler" },
            { "value": "icon-send", "label": "Send" },
            { "value": "icon-sewing-machine", "label": "Sewing machine" },
            { "value": "icon-shipment-world", "label": "Shipment world" },
            { "value": "icon-shipment", "label": "Shipment" },
            { "value": "icon-shoes", "label": "Shoes" },
            { "value": "icon-store", "label": "Store" },
            { "value": "icon-support-headphones", "label": "Support headphones" },
            { "value": "icon-thread", "label": "Thread" },
            { "value": "icon-truck", "label": "Truck" },
            { "value": "icon-washer", "label": "Washer" },
            { "value": "icon-water", "label": "Water" }
          ]
        },
        {
          "type": "richtext",
          "id": "raw_content_3",
          "label": "Tab text"
        },
        {
          "type": "header",
          "content": "Section 4"
        },
        {
          "type": "text",
          "id": "title_4",
          "label": "Tab heading"
        },
        {
          "type": "select",
          "id": "icon_name_4",
          "label": "Icon",
          "default": "",
          "options": [
            { "value": "", "label": "No icon" },
            { "value": "icon-animal", "label": "Animal" },
            { "value": "icon-animal-paw", "label": "Animal paw" },
            { "value": "icon-award", "label": "Award" },
            { "value": "icon-basket-like", "label": "Basket like" },
            { "value": "icon-basket-return", "label": "Basket return" },
            { "value": "icon-cart-check", "label": "Cart check" },
            { "value": "icon-cart-message", "label": "Cart message" },
            { "value": "icon-chat", "label": "Chat" },
            { "value": "icon-dollar", "label": "Dollar" },
            { "value": "icon-earth", "label": "Earth" },
            { "value": "icon-email", "label": "Email" },
            { "value": "icon-gluten-free", "label": "Gluten free" },
            { "value": "icon-iron", "label": "Iron" },
            { "value": "icon-leaf", "label": "Leaf" },
            { "value": "icon-legal", "label": "Legal" },
            { "value": "icon-lock-card", "label": "Lock card" },
            { "value": "icon-lock-shield", "label": "Lock shield" },
            { "value": "icon-lock-window", "label": "Lock window" },
            { "value": "icon-payment", "label": "Payment" },
            { "value": "icon-phone", "label": "Phone" },
            { "value": "icon-rating", "label": "Rating" },
            { "value": "icon-star-rating", "label": "Rating star" },
            { "value": "icon-recycled", "label": "Recycled" },
            { "value": "icon-ruler", "label": "Ruler" },
            { "value": "icon-send", "label": "Send" },
            { "value": "icon-sewing-machine", "label": "Sewing machine" },
            { "value": "icon-shipment-world", "label": "Shipment world" },
            { "value": "icon-shipment", "label": "Shipment" },
            { "value": "icon-shoes", "label": "Shoes" },
            { "value": "icon-store", "label": "Store" },
            { "value": "icon-support-headphones", "label": "Support headphones" },
            { "value": "icon-thread", "label": "Thread" },
            { "value": "icon-truck", "label": "Truck" },
            { "value": "icon-washer", "label": "Washer" },
            { "value": "icon-water", "label": "Water" }
          ]
        },
        {
          "type": "richtext",
          "id": "raw_content_4",
          "label": "Tab text"
        },
        {
          "type": "header",
          "content": "Section 5"
        },
        {
          "type": "text",
          "id": "title_5",
          "label": "Tab heading"
        },
        {
          "type": "select",
          "id": "icon_name_5",
          "label": "Icon",
          "default": "",
          "options": [
            { "value": "", "label": "No icon" },
            { "value": "icon-animal", "label": "Animal" },
            { "value": "icon-animal-paw", "label": "Animal paw" },
            { "value": "icon-award", "label": "Award" },
            { "value": "icon-basket-like", "label": "Basket like" },
            { "value": "icon-basket-return", "label": "Basket return" },
            { "value": "icon-cart-check", "label": "Cart check" },
            { "value": "icon-cart-message", "label": "Cart message" },
            { "value": "icon-chat", "label": "Chat" },
            { "value": "icon-dollar", "label": "Dollar" },
            { "value": "icon-earth", "label": "Earth" },
            { "value": "icon-email", "label": "Email" },
            { "value": "icon-gluten-free", "label": "Gluten free" },
            { "value": "icon-iron", "label": "Iron" },
            { "value": "icon-leaf", "label": "Leaf" },
            { "value": "icon-legal", "label": "Legal" },
            { "value": "icon-lock-card", "label": "Lock card" },
            { "value": "icon-lock-shield", "label": "Lock shield" },
            { "value": "icon-lock-window", "label": "Lock window" },
            { "value": "icon-payment", "label": "Payment" },
            { "value": "icon-phone", "label": "Phone" },
            { "value": "icon-rating", "label": "Rating" },
            { "value": "icon-star-rating", "label": "Rating star" },
            { "value": "icon-recycled", "label": "Recycled" },
            { "value": "icon-ruler", "label": "Ruler" },
            { "value": "icon-send", "label": "Send" },
            { "value": "icon-sewing-machine", "label": "Sewing machine" },
            { "value": "icon-shipment-world", "label": "Shipment world" },
            { "value": "icon-shipment", "label": "Shipment" },
            { "value": "icon-shoes", "label": "Shoes" },
            { "value": "icon-store", "label": "Store" },
            { "value": "icon-support-headphones", "label": "Support headphones" },
            { "value": "icon-thread", "label": "Thread" },
            { "value": "icon-truck", "label": "Truck" },
            { "value": "icon-washer", "label": "Washer" },
            { "value": "icon-water", "label": "Water" }
          ]
        },
        {
          "type": "richtext",
          "id": "raw_content_5",
          "label": "Tab text"
        },
        {
          "type": "header",
          "content": "Block spacing"
        },
        {
          "type": "range",
          "id": "padding_bottom",
          "min": 0,
          "max": 100,
          "step": 2,
          "unit": "px",
          "label": "Padding bottom",
          "default": 20
        }
      ]
    },
    {
      "type": "upsell",
      "name": "Upsell",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Buy it with"
        },
        {
          "type": "select",
          "id": "upsell_type",
          "label": "Upsell type",
          "default": "product_single",
          "options": [
            { "value": "product_single", "label": "Single Product" },
            { "value": "product_grouping", "label": "Product list" }
          ]
        },
        {
          "type": "paragraph",
          "content": "Upsell is best as a one-click add to cart, so upsell products should have no variants.  Upsell products with variants will open a quick-view window. [Learn more](https://groupthought.com/link/pipeline/docs/upsell/variant)"
        },
        {
          "type": "header",
          "content": "Single Product"
        },
        {
          "type": "product",
          "id": "product",
          "label": "Product"
        },
        {
        "type": "paragraph",
        "content": "Recommendation: create a metafield called 'theme.upsell' and add it as a dynamic source."
        },
        {
          "type": "header",
          "content": "Product list"
        },
        {
          "type": "product_list",
          "id": "upsell_product_list",
          "label": "Product"
        },
        {
          "type": "range",
          "id": "upsell_list_limit",
          "label": "Product limit",
          "min": 1,
          "max": 3,
          "step": 1,
          "default": 1
        },
        {
          "type": "paragraph",
          "content": "Reccomendation: create a metafield called 'theme.upsell_list' and add it as a dynamic source."
        },
        {
          "type": "header",
          "content": "Block spacing"
        },
        {
          "type": "range",
          "id": "padding_bottom",
          "min": 0,
          "max": 100,
          "step": 2,
          "unit": "px",
          "label": "Padding bottom",
          "default": 20
        }
      ]
    },
    {
      "type": "sharing",
      "name": "Sharing",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "share_label",
          "label": "Text",
          "default": "Share"
        },
        {
          "type": "paragraph",
          "content": "If you include a link in social media posts, the page's featured image will be shown as the preview image. [Learn more](https://help.shopify.com/en/manual/online-store/images/showing-social-media-thumbnail-images)."
        },
        {
          "type": "paragraph",
          "content": "A store title and description are included with the preview image. [Learn more](https://help.shopify.com/en/manual/promoting-marketing/seo/adding-keywords#set-a-title-and-description-for-your-online-store)."
        },
        {
          "type": "select",
          "id": "target_device",
          "label": "Device size",
          "default": "",
          "options": [
            {"value": "", "label": "Show on all screen sizes"},
            {"value": "hidden-mobile", "label": "Hide on mobile"},
            {"value": "mobile-only", "label": "Show on mobile only"}
          ]
        },
        {
          "type": "header",
          "content": "Block spacing"
        },
        {
          "type": "range",
          "id": "padding_bottom",
          "min": 0,
          "max": 100,
          "step": 2,
          "unit": "px",
          "label": "Padding bottom",
          "default": 20
        }
      ]
    },
    {
      "type": "pickup",
      "name": "Local pickup",
      "limit": 1,
      "settings": [
        {
          "type": "paragraph",
          "content": "Show customers where they can pick up the product. [Learn more](https://help.shopify.com/en/manual/shipping/setting-up-and-managing-your-shipping/local-methods/local-pickup#show-pickup-availability-to-your-customers)"
        },
        {
          "type": "header",
          "content": "Block spacing"
        },
        {
          "type": "range",
          "id": "padding_bottom",
          "min": 0,
          "max": 100,
          "step": 2,
          "unit": "px",
          "label": "Padding bottom",
          "default": 20
        }
      ]
    },
    {
      "type": "title",
      "name": "Title",
      "limit": 1,
      "settings": [
        {
          "type":  "range",
          "id":    "text_size",
          "label": "Title size",
          "min":    3,
          "max":    15,
          "step":   1,
          "default":9
        },
        {
          "type": "checkbox",
          "id": "product_show_cutline",
          "label": "Show cutline",
          "default": true
        },
        {
          "type": "header",
          "content": "Star rating",
          "info": "Requires a product review app to create [standard metafields](https://shopify.dev/apps/metafields/definitions/standard-definitions) for star ratings."
        },
        {
          "type": "checkbox",
          "id": "show_rating",
          "label": "Enable star rating",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "show_rating_count",
          "label": "Show rating count",
          "default": false
        },
        {
          "type": "header",
          "content": "Block spacing"
        },
        {
          "type": "range",
          "id": "padding_bottom",
          "min": 0,
          "max": 100,
          "step": 2,
          "unit": "px",
          "label": "Padding bottom",
          "default": 20
        }
      ]
    },
    {
      "type": "price",
      "name": "Price",
      "limit": 1,
      "settings": [
        {
          "type":  "range",
          "id":    "price_size",
          "label": "Price size",
          "min":    3,
          "max":    10,
          "step":   1,
          "default":5
        },
        {
          "type": "header",
          "content": "Block spacing"
        },
        {
          "type": "range",
          "id": "padding_bottom",
          "min": 0,
          "max": 100,
          "step": 2,
          "unit": "px",
          "label": "Padding bottom",
          "default": 40
        }
      ]
    },
    {
      "type": "text",
      "name": "Text",
      "settings": [
        {
          "type": "richtext",
          "id": "title",
          "label": "Text",
          "default": "<p>Product text</p>"
        },
        {
          "type": "header",
          "content": "Block spacing"
        },
        {
          "type": "range",
          "id": "padding_bottom",
          "min": 0,
          "max": 100,
          "step": 2,
          "unit": "px",
          "label": "Padding bottom",
          "default": 20
        }
      ]
    },
    {
      "type": "vendor",
      "name": "Vendor",
      "settings": [
        {
          "type": "checkbox",
          "id": "add_vendor_link",
          "label": "Link to vendor",
          "default": true
        },
        {
          "type": "header",
          "content": "Block spacing"
        },
        {
          "type": "range",
          "id": "padding_bottom",
          "min": 0,
          "max": 100,
          "step": 2,
          "unit": "px",
          "label": "Padding bottom",
          "default": 20
        }
      ]
    },
    {
      "type": "liquid",
      "name": "Liquid",
      "settings": [
        {
          "type": "liquid",
          "id": "custom_liquid",
          "label": "Custom Liquid",
          "info": "Add app snippets or other Liquid code to create advanced customizations."
        }
      ]
    },
    {
      "type": "icon-delivery",
      "name": "Icon Delivery",
      "settings": [
        {
          "type": "select",
          "id": "icon_name_delivery",
          "label": "Icon",
          "default": "icon-award",
          "options": [
            { "value": "icon-animal", "label": "Animal" },
            { "value": "icon-animal-paw", "label": "Animal paw" },
            { "value": "icon-award", "label": "Award" },
            { "value": "icon-basket-like", "label": "Basket like" },
            { "value": "icon-basket-return", "label": "Basket return" },
            { "value": "icon-cart-check", "label": "Cart check" },
            { "value": "icon-cart-message", "label": "Cart message" },
            { "value": "icon-chat", "label": "Chat" },
            { "value": "icon-dollar", "label": "Dollar" },
            { "value": "icon-earth", "label": "Earth" },
            { "value": "icon-email", "label": "Email" },
            { "value": "icon-gluten-free", "label": "Gluten free" },
            { "value": "icon-iron", "label": "Iron" },
            { "value": "icon-leaf", "label": "Leaf" },
            { "value": "icon-legal", "label": "Legal" },
            { "value": "icon-lock-card", "label": "Lock card" },
            { "value": "icon-lock-shield", "label": "Lock shield" },
            { "value": "icon-lock-window", "label": "Lock window" },
            { "value": "icon-payment", "label": "Payment" },
            { "value": "icon-phone", "label": "Phone" },
            { "value": "icon-rating", "label": "Rating" },
            { "value": "icon-star-rating", "label": "Rating star" },
            { "value": "icon-recycled", "label": "Recycled" },
            { "value": "icon-ruler", "label": "Ruler" },
            { "value": "icon-send", "label": "Send" },
            { "value": "icon-sewing-machine", "label": "Sewing machine" },
            { "value": "icon-shipment-world", "label": "Shipment world" },
            { "value": "icon-shipment", "label": "Shipment" },
            { "value": "icon-shoes", "label": "Shoes" },
            { "value": "icon-store", "label": "Store" },
            { "value": "icon-support-headphones", "label": "Support headphones" },
            { "value": "icon-thread", "label": "Thread" },
            { "value": "icon-truck", "label": "Truck" },
            { "value": "icon-washer", "label": "Washer" },
            { "value": "icon-water", "label": "Water" }
          ]
        },
        {
          "type": "image_picker",
          "id": "image-delivery",
          "label": "Image",
          "info": "If set, image overrides the icon above"
        },
        {
          "type": "range",
          "id": "icon_size_delivery",
          "label": "Size",
          "unit": "px",
          "min": 16,
          "max": 50,
          "step": 2,
          "default": 16
        },
        {
          "type": "color",
          "id": "icon_color_delivery",
          "label": "Icon color",
          "default": "#4B4B4B"
        },
        {
          "type": "richtext",
          "id": "text-delivery",
          "label": "Text",
          "default": "<p>Icon text</p>"
        },
        {
          "type": "header",
          "content": "Display options"
        },
        {
          "type": "checkbox",
          "id": "hide_icon_delivery",
          "label": "Hide icon",
          "default": false,
          "info": "Show only text without the icon"
        },
        {
          "type": "select",
          "id": "alignment_delivery",
          "label": "Content alignment",
          "default": "text-left",
          "options": [
            { "value": "text-left", "label": "Left" },
            { "value": "text-center", "label": "Center" },
            { "value": "text-right", "label": "Right" }
          ]
        },
        {
          "type": "header",
          "content": "Block spacing"
        },
        {
          "type": "range",
          "id": "padding_bottom_delivery",
          "min": 0,
          "max": 100,
          "step": 2,
          "unit": "px",
          "label": "Padding bottom",
          "default": 8
        }
      ]
    },
    {
      "type": "icon",
      "name": "Icon",
      "settings": [
        {
          "type": "select",
          "id": "icon_name",
          "label": "Icon",
          "default": "icon-award",
          "options": [
            { "value": "icon-animal", "label": "Animal" },
            { "value": "icon-animal-paw", "label": "Animal paw" },
            { "value": "icon-award", "label": "Award" },
            { "value": "icon-basket-like", "label": "Basket like" },
            { "value": "icon-basket-return", "label": "Basket return" },
            { "value": "icon-cart-check", "label": "Cart check" },
            { "value": "icon-cart-message", "label": "Cart message" },
            { "value": "icon-chat", "label": "Chat" },
            { "value": "icon-dollar", "label": "Dollar" },
            { "value": "icon-earth", "label": "Earth" },
            { "value": "icon-email", "label": "Email" },
            { "value": "icon-gluten-free", "label": "Gluten free" },
            { "value": "icon-iron", "label": "Iron" },
            { "value": "icon-leaf", "label": "Leaf" },
            { "value": "icon-legal", "label": "Legal" },
            { "value": "icon-lock-card", "label": "Lock card" },
            { "value": "icon-lock-shield", "label": "Lock shield" },
            { "value": "icon-lock-window", "label": "Lock window" },
            { "value": "icon-payment", "label": "Payment" },
            { "value": "icon-phone", "label": "Phone" },
            { "value": "icon-rating", "label": "Rating" },
            { "value": "icon-star-rating", "label": "Rating star" },
            { "value": "icon-recycled", "label": "Recycled" },
            { "value": "icon-ruler", "label": "Ruler" },
            { "value": "icon-send", "label": "Send" },
            { "value": "icon-sewing-machine", "label": "Sewing machine" },
            { "value": "icon-shipment-world", "label": "Shipment world" },
            { "value": "icon-shipment", "label": "Shipment" },
            { "value": "icon-shoes", "label": "Shoes" },
            { "value": "icon-store", "label": "Store" },
            { "value": "icon-support-headphones", "label": "Support headphones" },
            { "value": "icon-thread", "label": "Thread" },
            { "value": "icon-truck", "label": "Truck" },
            { "value": "icon-washer", "label": "Washer" },
            { "value": "icon-water", "label": "Water" }
          ]
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image",
          "info": "If set, image overrides the icon above"
        },
        {
          "type": "range",
          "id": "icon_size",
          "label": "Size",
          "unit": "px",
          "min": 16,
          "max": 50,
          "step": 2,
          "default": 16
        },
        {
          "type": "color",
          "id": "icon_color",
          "label": "Icon color",
          "default": "#4B4B4B"
        },
        {
          "type": "richtext",
          "id": "text",
          "label": "Text",
          "default": "<p>Icon text</p>"
        },
        {
          "type": "header",
          "content": "Block spacing"
        },
        {
          "type": "range",
          "id": "padding_bottom",
          "min": 0,
          "max": 100,
          "step": 2,
          "unit": "px",
          "label": "Padding bottom",
          "default": 8
        }
      ]
    },
    {
      "type": "new-icon-text",
      "name": "New icon text",
      "settings": [
        {
          "type": "header",
          "content": "Icon settings"
        },
        {
          "type": "select",
          "id": "icon_name",
          "label": "Icon",
          "default": "icon-award",
          "options": [
            { "value": "", "label": "No icon" },
            { "value": "icon-animal", "label": "Animal" },
            { "value": "icon-animal-paw", "label": "Animal paw" },
            { "value": "icon-award", "label": "Award" },
            { "value": "icon-basket-like", "label": "Basket like" },
            { "value": "icon-basket-return", "label": "Basket return" },
            { "value": "icon-cart-check", "label": "Cart check" },
            { "value": "icon-cart-message", "label": "Cart message" },
            { "value": "icon-chat", "label": "Chat" },
            { "value": "icon-dollar", "label": "Dollar" },
            { "value": "icon-earth", "label": "Earth" },
            { "value": "icon-email", "label": "Email" },
            { "value": "icon-gluten-free", "label": "Gluten free" },
            { "value": "icon-iron", "label": "Iron" },
            { "value": "icon-leaf", "label": "Leaf" },
            { "value": "icon-legal", "label": "Legal" },
            { "value": "icon-lock-card", "label": "Lock card" },
            { "value": "icon-lock-shield", "label": "Lock shield" },
            { "value": "icon-lock-window", "label": "Lock window" },
            { "value": "icon-payment", "label": "Payment" },
            { "value": "icon-phone", "label": "Phone" },
            { "value": "icon-rating", "label": "Rating" },
            { "value": "icon-star-rating", "label": "Rating star" },
            { "value": "icon-recycled", "label": "Recycled" },
            { "value": "icon-ruler", "label": "Ruler" },
            { "value": "icon-send", "label": "Send" },
            { "value": "icon-sewing-machine", "label": "Sewing machine" },
            { "value": "icon-shipment-world", "label": "Shipment world" },
            { "value": "icon-shipment", "label": "Shipment" },
            { "value": "icon-shoes", "label": "Shoes" },
            { "value": "icon-store", "label": "Store" },
            { "value": "icon-support-headphones", "label": "Support headphones" },
            { "value": "icon-thread", "label": "Thread" },
            { "value": "icon-truck", "label": "Truck" },
            { "value": "icon-washer", "label": "Washer" },
            { "value": "icon-water", "label": "Water" }
          ]
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Custom image",
          "info": "If set, image overrides the icon above"
        },
        {
          "type": "checkbox",
          "id": "hide_icon",
          "label": "Hide icon",
          "default": false,
          "info": "Show only text without the icon"
        },
        {
          "type": "select",
          "id": "icon_location",
          "label": "Icon location",
          "default": "icon-left",
          "options": [
            { "value": "icon-left", "label": "Left" },
            { "value": "icon-right", "label": "Right" },
            { "value": "icon-top", "label": "Top" }
          ]
        },
        {
          "type": "range",
          "id": "icon_size",
          "label": "Icon size",
          "unit": "px",
          "min": 16,
          "max": 50,
          "step": 2,
          "default": 20
        },
        {
          "type": "color",
          "id": "icon_color",
          "label": "Icon color",
          "default": "#4B4B4B"
        },
        {
          "type": "header",
          "content": "Text settings"
        },
        {
          "type": "richtext",
          "id": "text",
          "label": "Text content",
          "default": "<p>Your text content here</p>"
        },
        {
          "type": "select",
          "id": "text_align",
          "label": "Text alignment",
          "default": "text-left",
          "options": [
            { "value": "text-left", "label": "Left" },
            { "value": "text-center", "label": "Center" },
            { "value": "text-right", "label": "Right" }
          ]
        },
        {
          "type": "range",
          "id": "font_size_desktop",
          "label": "Font size (Desktop)",
          "unit": "px",
          "min": 10,
          "max": 28,
          "step": 1,
          "default": 16
        },
        {
          "type": "range",
          "id": "font_size_mobile",
          "label": "Font size (Mobile)",
          "unit": "px",
          "min": 10,
          "max": 28,
          "step": 1,
          "default": 14
        },
        {
          "type": "header",
          "content": "Link settings"
        },
        {
          "type": "text",
          "id": "link_text",
          "label": "Link text",
          "info": "This will appear at the end of your main text"
        },
        {
          "type": "url",
          "id": "link_url",
          "label": "Link URL"
        },
        {
          "type": "header",
          "content": "Styling"
        },
        {
          "type": "color",
          "id": "background_color",
          "label": "Background color",
          "default": "#f8f8f8"
        },
        {
          "type": "range",
          "id": "border_radius",
          "label": "Border radius",
          "unit": "px",
          "min": 0,
          "max": 100,
          "step": 1,
          "default": 8
        },
        {
          "type": "header",
          "content": "Block spacing"
        },
        {
          "type": "range",
          "id": "padding_bottom",
          "min": 0,
          "max": 100,
          "step": 2,
          "unit": "px",
          "label": "Padding bottom",
          "default": 20
        }
      ]
    },
    {
      "type": "icon-list",
      "name": "Icon list",
      "settings": [
        {
          "type": "header",
          "content": "Layout"
        },
        {
          "type": "select",
          "id": "layout_style",
          "label": "Layout style",
          "default": "icon-list-row",
          "options": [
            { "value": "icon-list-row", "label": "Row (horizontal)" },
            { "value": "icon-list-stack", "label": "Stack (vertical)" }
          ]
        },
        {
          "type": "select",
          "id": "icon_position",
          "label": "Icon position",
          "default": "icon-left",
          "options": [
            { "value": "icon-left", "label": "Left of text" },
            { "value": "icon-top", "label": "Above text" }
          ]
        },
        {
          "type": "header",
          "content": "Icon settings"
        },
        {
          "type": "range",
          "id": "icon_size",
          "label": "Icon size",
          "unit": "px",
          "min": 16,
          "max": 50,
          "step": 2,
          "default": 16
        },
        {
          "type": "color",
          "id": "icon_color",
          "label": "Icon color",
          "default": "#4B4B4B"
        },
        {
          "type": "header",
          "content": "Icon 1"
        },
        {
          "type": "select",
          "id": "icon_name_1",
          "label": "Icon",
          "default": "icon-award",
          "options": [
            { "value": "", "label": "No icon" },
            { "value": "icon-animal", "label": "Animal" },
            { "value": "icon-animal-paw", "label": "Animal paw" },
            { "value": "icon-award", "label": "Award" },
            { "value": "icon-basket-like", "label": "Basket like" },
            { "value": "icon-basket-return", "label": "Basket return" },
            { "value": "icon-cart-check", "label": "Cart check" },
            { "value": "icon-cart-message", "label": "Cart message" },
            { "value": "icon-chat", "label": "Chat" },
            { "value": "icon-dollar", "label": "Dollar" },
            { "value": "icon-earth", "label": "Earth" },
            { "value": "icon-email", "label": "Email" },
            { "value": "icon-gluten-free", "label": "Gluten free" },
            { "value": "icon-iron", "label": "Iron" },
            { "value": "icon-leaf", "label": "Leaf" },
            { "value": "icon-legal", "label": "Legal" },
            { "value": "icon-lock-card", "label": "Lock card" },
            { "value": "icon-lock-shield", "label": "Lock shield" },
            { "value": "icon-lock-window", "label": "Lock window" },
            { "value": "icon-payment", "label": "Payment" },
            { "value": "icon-phone", "label": "Phone" },
            { "value": "icon-rating", "label": "Rating" },
            { "value": "icon-star-rating", "label": "Rating star" },
            { "value": "icon-recycled", "label": "Recycled" },
            { "value": "icon-ruler", "label": "Ruler" },
            { "value": "icon-send", "label": "Send" },
            { "value": "icon-sewing-machine", "label": "Sewing machine" },
            { "value": "icon-shipment-world", "label": "Shipment world" },
            { "value": "icon-shipment", "label": "Shipment" },
            { "value": "icon-shoes", "label": "Shoes" },
            { "value": "icon-store", "label": "Store" },
            { "value": "icon-support-headphones", "label": "Support headphones" },
            { "value": "icon-thread", "label": "Thread" },
            { "value": "icon-truck", "label": "Truck" },
            { "value": "icon-washer", "label": "Washer" },
            { "value": "icon-water", "label": "Water" }
          ]
        },
        {
          "type": "image_picker",
          "id": "image_1",
          "label": "Image",
          "info": "If set, image overrides the icon above"
        },
        {
          "type": "richtext",
          "id": "text_1",
          "label": "Text",
          "default": "<p>Icon text 1</p>"
        },
        {
          "type": "header",
          "content": "Icon 2"
        },
        {
          "type": "select",
          "id": "icon_name_2",
          "label": "Icon",
          "default": "",
          "options": [
            { "value": "", "label": "No icon" },
            { "value": "icon-animal", "label": "Animal" },
            { "value": "icon-animal-paw", "label": "Animal paw" },
            { "value": "icon-award", "label": "Award" },
            { "value": "icon-basket-like", "label": "Basket like" },
            { "value": "icon-basket-return", "label": "Basket return" },
            { "value": "icon-cart-check", "label": "Cart check" },
            { "value": "icon-cart-message", "label": "Cart message" },
            { "value": "icon-chat", "label": "Chat" },
            { "value": "icon-dollar", "label": "Dollar" },
            { "value": "icon-earth", "label": "Earth" },
            { "value": "icon-email", "label": "Email" },
            { "value": "icon-gluten-free", "label": "Gluten free" },
            { "value": "icon-iron", "label": "Iron" },
            { "value": "icon-leaf", "label": "Leaf" },
            { "value": "icon-legal", "label": "Legal" },
            { "value": "icon-lock-card", "label": "Lock card" },
            { "value": "icon-lock-shield", "label": "Lock shield" },
            { "value": "icon-lock-window", "label": "Lock window" },
            { "value": "icon-payment", "label": "Payment" },
            { "value": "icon-phone", "label": "Phone" },
            { "value": "icon-rating", "label": "Rating" },
            { "value": "icon-star-rating", "label": "Rating star" },
            { "value": "icon-recycled", "label": "Recycled" },
            { "value": "icon-ruler", "label": "Ruler" },
            { "value": "icon-send", "label": "Send" },
            { "value": "icon-sewing-machine", "label": "Sewing machine" },
            { "value": "icon-shipment-world", "label": "Shipment world" },
            { "value": "icon-shipment", "label": "Shipment" },
            { "value": "icon-shoes", "label": "Shoes" },
            { "value": "icon-store", "label": "Store" },
            { "value": "icon-support-headphones", "label": "Support headphones" },
            { "value": "icon-thread", "label": "Thread" },
            { "value": "icon-truck", "label": "Truck" },
            { "value": "icon-washer", "label": "Washer" },
            { "value": "icon-water", "label": "Water" }
          ]
        },
        {
          "type": "image_picker",
          "id": "image_2",
          "label": "Image",
          "info": "If set, image overrides the icon above"
        },
        {
          "type": "richtext",
          "id": "text_2",
          "label": "Text"
        },
        {
          "type": "header",
          "content": "Icon 3"
        },
        {
          "type": "select",
          "id": "icon_name_3",
          "label": "Icon",
          "default": "",
          "options": [
            { "value": "", "label": "No icon" },
            { "value": "icon-animal", "label": "Animal" },
            { "value": "icon-animal-paw", "label": "Animal paw" },
            { "value": "icon-award", "label": "Award" },
            { "value": "icon-basket-like", "label": "Basket like" },
            { "value": "icon-basket-return", "label": "Basket return" },
            { "value": "icon-cart-check", "label": "Cart check" },
            { "value": "icon-cart-message", "label": "Cart message" },
            { "value": "icon-chat", "label": "Chat" },
            { "value": "icon-dollar", "label": "Dollar" },
            { "value": "icon-earth", "label": "Earth" },
            { "value": "icon-email", "label": "Email" },
            { "value": "icon-gluten-free", "label": "Gluten free" },
            { "value": "icon-iron", "label": "Iron" },
            { "value": "icon-leaf", "label": "Leaf" },
            { "value": "icon-legal", "label": "Legal" },
            { "value": "icon-lock-card", "label": "Lock card" },
            { "value": "icon-lock-shield", "label": "Lock shield" },
            { "value": "icon-lock-window", "label": "Lock window" },
            { "value": "icon-payment", "label": "Payment" },
            { "value": "icon-phone", "label": "Phone" },
            { "value": "icon-rating", "label": "Rating" },
            { "value": "icon-star-rating", "label": "Rating star" },
            { "value": "icon-recycled", "label": "Recycled" },
            { "value": "icon-ruler", "label": "Ruler" },
            { "value": "icon-send", "label": "Send" },
            { "value": "icon-sewing-machine", "label": "Sewing machine" },
            { "value": "icon-shipment-world", "label": "Shipment world" },
            { "value": "icon-shipment", "label": "Shipment" },
            { "value": "icon-shoes", "label": "Shoes" },
            { "value": "icon-store", "label": "Store" },
            { "value": "icon-support-headphones", "label": "Support headphones" },
            { "value": "icon-thread", "label": "Thread" },
            { "value": "icon-truck", "label": "Truck" },
            { "value": "icon-washer", "label": "Washer" },
            { "value": "icon-water", "label": "Water" }
          ]
        },
        {
          "type": "image_picker",
          "id": "image_3",
          "label": "Image",
          "info": "If set, image overrides the icon above"
        },
        {
          "type": "richtext",
          "id": "text_3",
          "label": "Text"
        },
        {
          "type": "header",
          "content": "Icon 4"
        },
        {
          "type": "select",
          "id": "icon_name_4",
          "label": "Icon",
          "default": "",
          "options": [
            { "value": "", "label": "No icon" },
            { "value": "icon-animal", "label": "Animal" },
            { "value": "icon-animal-paw", "label": "Animal paw" },
            { "value": "icon-award", "label": "Award" },
            { "value": "icon-basket-like", "label": "Basket like" },
            { "value": "icon-basket-return", "label": "Basket return" },
            { "value": "icon-cart-check", "label": "Cart check" },
            { "value": "icon-cart-message", "label": "Cart message" },
            { "value": "icon-chat", "label": "Chat" },
            { "value": "icon-dollar", "label": "Dollar" },
            { "value": "icon-earth", "label": "Earth" },
            { "value": "icon-email", "label": "Email" },
            { "value": "icon-gluten-free", "label": "Gluten free" },
            { "value": "icon-iron", "label": "Iron" },
            { "value": "icon-leaf", "label": "Leaf" },
            { "value": "icon-legal", "label": "Legal" },
            { "value": "icon-lock-card", "label": "Lock card" },
            { "value": "icon-lock-shield", "label": "Lock shield" },
            { "value": "icon-lock-window", "label": "Lock window" },
            { "value": "icon-payment", "label": "Payment" },
            { "value": "icon-phone", "label": "Phone" },
            { "value": "icon-rating", "label": "Rating" },
            { "value": "icon-star-rating", "label": "Rating star" },
            { "value": "icon-recycled", "label": "Recycled" },
            { "value": "icon-ruler", "label": "Ruler" },
            { "value": "icon-send", "label": "Send" },
            { "value": "icon-sewing-machine", "label": "Sewing machine" },
            { "value": "icon-shipment-world", "label": "Shipment world" },
            { "value": "icon-shipment", "label": "Shipment" },
            { "value": "icon-shoes", "label": "Shoes" },
            { "value": "icon-store", "label": "Store" },
            { "value": "icon-support-headphones", "label": "Support headphones" },
            { "value": "icon-thread", "label": "Thread" },
            { "value": "icon-truck", "label": "Truck" },
            { "value": "icon-washer", "label": "Washer" },
            { "value": "icon-water", "label": "Water" }
          ]
        },
        {
          "type": "image_picker",
          "id": "image_4",
          "label": "Image",
          "info": "If set, image overrides the icon above"
        },
        {
          "type": "richtext",
          "id": "text_4",
          "label": "Text"
        },
        {
          "type": "header",
          "content": "Icon 5"
        },
        {
          "type": "select",
          "id": "icon_name_5",
          "label": "Icon",
          "default": "",
          "options": [
            { "value": "", "label": "No icon" },
            { "value": "icon-animal", "label": "Animal" },
            { "value": "icon-animal-paw", "label": "Animal paw" },
            { "value": "icon-award", "label": "Award" },
            { "value": "icon-basket-like", "label": "Basket like" },
            { "value": "icon-basket-return", "label": "Basket return" },
            { "value": "icon-cart-check", "label": "Cart check" },
            { "value": "icon-cart-message", "label": "Cart message" },
            { "value": "icon-chat", "label": "Chat" },
            { "value": "icon-dollar", "label": "Dollar" },
            { "value": "icon-earth", "label": "Earth" },
            { "value": "icon-email", "label": "Email" },
            { "value": "icon-gluten-free", "label": "Gluten free" },
            { "value": "icon-iron", "label": "Iron" },
            { "value": "icon-leaf", "label": "Leaf" },
            { "value": "icon-legal", "label": "Legal" },
            { "value": "icon-lock-card", "label": "Lock card" },
            { "value": "icon-lock-shield", "label": "Lock shield" },
            { "value": "icon-lock-window", "label": "Lock window" },
            { "value": "icon-payment", "label": "Payment" },
            { "value": "icon-phone", "label": "Phone" },
            { "value": "icon-rating", "label": "Rating" },
            { "value": "icon-star-rating", "label": "Rating star" },
            { "value": "icon-recycled", "label": "Recycled" },
            { "value": "icon-ruler", "label": "Ruler" },
            { "value": "icon-send", "label": "Send" },
            { "value": "icon-sewing-machine", "label": "Sewing machine" },
            { "value": "icon-shipment-world", "label": "Shipment world" },
            { "value": "icon-shipment", "label": "Shipment" },
            { "value": "icon-shoes", "label": "Shoes" },
            { "value": "icon-store", "label": "Store" },
            { "value": "icon-support-headphones", "label": "Support headphones" },
            { "value": "icon-thread", "label": "Thread" },
            { "value": "icon-truck", "label": "Truck" },
            { "value": "icon-washer", "label": "Washer" },
            { "value": "icon-water", "label": "Water" }
          ]
        },
        {
          "type": "image_picker",
          "id": "image_5",
          "label": "Image",
          "info": "If set, image overrides the icon above"
        },
        {
          "type": "richtext",
          "id": "text_5",
          "label": "Text"
        },
        {
          "type": "header",
          "content": "Block spacing"
        },
        {
          "type": "range",
          "id": "padding_bottom",
          "min": 0,
          "max": 100,
          "step": 2,
          "unit": "px",
          "label": "Padding bottom",
          "default": 20
        }
      ]
    },
    {
      "type": "image",
      "name": "Image",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type":    "range",
          "id":      "image_max_limit",
          "min":     5,
          "max":     500,
          "step":    5,
          "unit":    "px",
          "label":   "Width",
          "default": 120
        },
        {
          "type": "select",
          "id": "alignment",
          "label": "Alignment",
          "options": [
            { "value": "product__block__image--left", "label": "Left" },
            { "value": "product__block__image--center", "label": "Center" },
            { "value": "product__block__image--right", "label": "Right" }
          ],
          "default": "product__block__image--left"
        },
        {
          "type": "header",
          "content": "Block spacing"
        },
        {
          "type": "range",
          "id": "padding_bottom",
          "min": 0,
          "max": 100,
          "step": 2,
          "unit": "px",
          "label": "Padding bottom",
          "default": 20
        }
      ]
    },
    {
      "type": "complimentary",
      "name": "Complimentary products",
      "limit": 1,
      "settings": [
        {
          "type": "header",
          "content": "From [Search & Discovery](https://apps.shopify.com/search-and-discovery)"
        },
        {
          "type": "paragraph",
          "content": "Once the app is installed you can [create complimentary products](/admin/apps/search-and-discovery/product-recommendations/new) that are unique to each product."
        },
        {
          "type": "paragraph",
          "content": "Complimentary products with variants will open a quick-view window. [Learn more](https://groupthought.com/link/pipeline/docs/upsell/complimentary)."
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Bought together"
        },
        {
          "type": "range",
          "id": "complimentary_list_limit",
          "label": "Product limit",
          "min": 1,
          "max": 3,
          "step": 1,
          "default": 1
        },
        {
          "type": "header",
          "content": "Block spacing"
        },
        {
          "type": "range",
          "id": "padding_bottom",
          "min": 0,
          "max": 100,
          "step": 2,
          "unit": "px",
          "label": "Padding bottom",
          "default": 20
        }
      ]
    },
    {
      "type": "spacer",
      "name": "Spacer",
      "settings": [
        {
          "type": "checkbox",
          "id": "show_line",
          "label": "Show line",
          "default": true
        },
        {
          "type": "select",
          "id": "target_device",
          "label": "Device size",
          "default": "",
          "options": [
            {"value": "", "label": "Show on all screen sizes"},
            {"value": "hidden-mobile", "label": "Hide on mobile"},
            {"value": "mobile-only", "label": "Show on mobile only"}
          ]
        },
        {
          "type": "header",
          "content": "Block spacing"
        },
        {
          "type": "range",
          "id": "padding_top",
          "min": 0,
          "max": 50,
          "step": 2,
          "unit": "px",
          "label": "Padding top",
          "default": 10
        },
        {
          "type": "range",
          "id": "padding_bottom",
          "min": 0,
          "max": 50,
          "step": 2,
          "unit": "px",
          "label": "Padding bottom",
          "default": 10
        }
      ]
    },
    {
      "type": "custom-buttons",
      "name": "Custom buttons",
      "settings": [
        {
          "type": "header",
          "content": "Button 1"
        },
        {
          "type": "text",
          "id": "link_text",
          "label": "Button text",
          "default": "Shop now"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Button link"
        },
        {
          "type": "select",
          "id": "button_color",
          "label": "Color",
          "default": "btn--primary",
          "options": [
            { "value": "btn--primary", "label": "Bright accent" },
            { "value": "btn--secondary", "label": "Secondary accent" },
            { "value": "btn--neutral", "label": "Text color" },
            { "value": "btn--black", "label": "Black" },
            { "value": "btn--white", "label": "White" }
          ]
        },
        {
          "type": "select",
          "id": "button_style",
          "label": "Style",
          "default": "btn",
          "options": [
            { "value": "btn", "label": "Solid" },
            { "value": "btn--soft", "label": "Soft"},
            { "value": "btn--outline", "label": "Outline" }
          ]
        },
        {
          "type": "header",
          "content": "Button 2"
        },
        {
          "type": "text",
          "id": "link_text_2",
          "label": "Button text",
          "default": "Learn more"
        },
        {
          "type": "url",
          "id": "link_2",
          "label": "Button link"
        },
        {
          "type": "select",
          "id": "button_color_2",
          "label": "Color",
          "default": "btn--primary",
          "options": [
            { "value": "btn--primary", "label": "Bright accent" },
            { "value": "btn--secondary", "label": "Secondary accent" },
            { "value": "btn--neutral", "label": "Text color" },
            { "value": "btn--black", "label": "Black" },
            { "value": "btn--white", "label": "White" }
          ]
        },
        {
          "type": "select",
          "id": "button_style_2",
          "label": "Style",
          "default": "btn--outline",
          "options": [
            { "value": "btn", "label": "Solid" },
            { "value": "btn--soft", "label": "Soft"},
            { "value": "btn--outline", "label": "Outline" }
          ]
        },
        {
          "type": "header",
          "content": "Text Link"
        },
        {
          "type": "text",
          "id": "text_link_text",
          "label": "Text",
          "default": "Learn more"
        },
        {
          "type": "url",
          "id": "text_link_url",
          "label": "Link"
        },
        {
          "type": "header",
          "content": "Product Comparison Popup"
        },
        {
          "type": "checkbox",
          "id": "enable_comparison_popup",
          "label": "Enable comparison popup",
          "default": false,
          "info": "When enabled, clicking the text link will open a product comparison popup"
        },
        {
          "type": "product",
          "id": "product_1",
          "label": "Product 1"
        },
        {
          "type": "product",
          "id": "product_2",
          "label": "Product 2"
        },
        {
          "type": "range",
          "id": "padding_bottom",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Bottom spacing",
          "default": 20
        }
      ]
    },
    {
      "type": "outofstock-message",
      "name": "Out of stock message",
      "limit": 1,
      "settings": [
        {
          "type": "richtext",
          "id": "message",
          "label": "Message",
          "default": "<p>Contact customer service to find a retail location near you with this color in stock</p>",
          "info": "This message will show when a variant is out of stock and has the custom.outofstockmsg metafield set to true. You can add links and formatting."
        },
        {
          "type": "header",
          "content": "Block spacing"
        },
        {
          "type": "range",
          "id": "padding_bottom",
          "min": 0,
          "max": 100,
          "step": 2,
          "unit": "px",
          "label": "Padding bottom",
          "default": 20
        }
      ]
    },
    {
      "type": "related-cards",
      "name": "Related cards",
      "limit": 1,
      "settings": [
        {
          "type": "header",
          "content": "Related products"
        },
        {
          "type": "paragraph",
          "content": "Select up to 5 products to display in a card format."
        },
        {
          "type": "product",
          "id": "product_1",
          "label": "Product 1"
        },
        {
          "type": "checkbox",
          "id": "enable_add_to_cart_1",
          "label": "Enable add to cart for Product 1",
          "default": false
        },
        {
          "type": "product",
          "id": "product_2",
          "label": "Product 2"
        },
        {
          "type": "checkbox",
          "id": "enable_add_to_cart_2",
          "label": "Enable add to cart for Product 2",
          "default": false
        },
        {
          "type": "product",
          "id": "product_3",
          "label": "Product 3"
        },
        {
          "type": "checkbox",
          "id": "enable_add_to_cart_3",
          "label": "Enable add to cart for Product 3",
          "default": false
        },
        {
          "type": "product",
          "id": "product_4",
          "label": "Product 4"
        },
        {
          "type": "checkbox",
          "id": "enable_add_to_cart_4",
          "label": "Enable add to cart for Product 4",
          "default": false
        },
        {
          "type": "product",
          "id": "product_5",
          "label": "Product 5"
        },
        {
          "type": "checkbox",
          "id": "enable_add_to_cart_5",
          "label": "Enable add to cart for Product 5",
          "default": false
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Related Products"
        },
        {
          "type": "range",
          "id":         "padding_bottom",
        "min": 0,
        "max": 100,
        "step": 5,
        "unit": "px",
        "label": "Bottom spacing",
        "default": 20
      }
    ]
  }
]
}

{% endschema %}



<script src="{{ 'variant-image-filter.js' | asset_url }}" defer="defer"></script>

<style>
  .product__price__main{
        align-items: baseline;
  }
  /* Custom Buttons Styling */
  .product__block__custom-buttons {
    border-bottom: 1px solid #e8e8e8;
    padding-bottom: var(--PB);
    margin-bottom: 20px;
  }
  
  .product__block__custom-buttons__wrapper {
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
    gap: 15px;
    width: 100%;
    margin-bottom: 15px;
  }
  
  .product__block__custom-buttons__wrapper a {
    margin: 0;
    flex-grow: 1;
    min-width: 150px;
    text-align: center;
  }
  
  .product__block__custom-buttons__text-link {
    margin-top: 10px;
  }
  
  .product__block__custom-buttons__text-link a {
    text-decoration: underline;
    font-size: 14px;
  }
  .klaviyo-bis-trigger{
    text-align: center;
    width: 100%;
    display: none; 
  }
  @media (max-width: 749px) {
    .product__block__custom-buttons__wrapper {
      flex-direction: row;
      justify-content: flex-start;
    }
    .product__block__custom-buttons__wrapper a {
      min-width: 40%;
    }
  }
  
  /* Comparison Popup Styling */
  .comparison-popup-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
    z-index: 9999;
    display: none;
    align-items: center;
    justify-content: center;
    overflow-y: auto;
  }
  
  .comparison-popup {
    position: relative;
    background-color: #22282D;
    color: #fff;
    max-width: 900px;
    width: 100%;
    max-height: 90vh;
    overflow-y: auto;
    padding: 30px 20px;
    border-radius: 8px;
    margin: 20px;
    top: 48px;
  }
  
  .comparison-popup-close {
    position: absolute;
    top: 15px;
    right: 15px;
    background: none;
    border: none;
    color: #fff;
    cursor: pointer;
    z-index: 10;
    padding: 5px;
  }
  
  .comparison-title {
    text-align: center;
    font-size: 20px;
    margin-bottom: 30px;
    letter-spacing: 1px;
  }
  
  .comparison-no-products {
    text-align: center;
    padding: 40px 0;
  }
  
  /* Popup Comparison Table Styling */
  .comparison-table {
    width: 100%;
    margin: 0 auto;
  }
  
  .comparison-header {
    display: flex;
    justify-content: space-between;
    margin-bottom: 20px;
    font-weight: bold;
    padding: 10px 0 10px;
    border-bottom: none;
  }
  
  .feature-column {
    width: 45%;
    text-align: left;
  }
  
  .product-column {
    width: 27.5%;
    text-align: center;
  }
  
  .comparison-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 0;
    border-bottom: none;
  }
  
  .feature-name {
    width: 45%;
    text-align: left;
    font-size: 16px;
    padding-right: 10px;
  }
  
  .check-mark {
    width: 27.5%;
    text-align: center;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  
  .check-mark svg {
    width: 18px;
    height: 18px;
  }
  
  .dash {
    font-size: 24px;
    line-height: 18px;
  }
  
  .price-row {
    border-bottom: none;
    padding-top: 20px;
  }
  
  .price {
    width: 27.5%;
    text-align: center;
    font-size: 16px;
  }
  
  @media screen and (max-width: 767px) {
    .comparison-popup {
      margin: 0;
      max-height: 100vh;
      border-radius: 0;
      width: 100%;
      padding: 20px 10px;
      top: 48px;
    }
    
    .feature-name {
      font-size: 14px;
    }
    
    .comparison-row {
      padding: 4px 0;
    }
    
    .check-mark svg {
      width: 16px;
      height: 16px;
    }
    
    .dash {
      font-size: 20px;
    }
    
    .price {
      font-size: 14px;
    }
  }
  
  body.popup-open {
    overflow: hidden;
  }
  
  /* Icon List Styling */
  .product__block__icon-list {
    padding-bottom: var(--PB);
  }
  
  .icon-list-wrapper {
    display: flex;
     gap: 0px;
    justify-content: space-between;
  }
  
  /* Row layout (horizontal) */
  .product__block__icon-list.icon-list-row .icon-list-wrapper {
    flex-direction: row;
    flex-wrap: wrap;
  }
  
  .product__block__icon-list.icon-list-row .icon-list-item {
    flex: 0;
  }
  
  /* Stack layout (vertical) */
  .product__block__icon-list.icon-list-stack .icon-list-wrapper {
    flex-direction: column;
  }
  
  .product__block__icon-list.icon-list-stack .icon-list-item {
    width: 100%;
  }
  
  /* Icon positioning - Left of text */
  .product__block__icon-list.icon-left .icon-list-item {
    display: flex;
    align-items: center;
    gap: 7px;
  }
  
  .product__block__icon-list.icon-left .icon-holder {
    flex-shrink: 0;
    margin-top: 2px;
  }
  
  .product__block__icon-list.icon-left .icon-text {
    flex: 1;
    white-space: nowrap;
  }
  
  /* Icon positioning - Above text */
  .product__block__icon-list.icon-top .icon-list-item {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    text-align: left;
  }
  
  .product__block__icon-list.icon-top .icon-holder {
    margin-bottom: 8px;
  }
  
  .product__block__icon-list.icon-top .icon-text {
    width: 100%;
  }
  
  /* Icon styling */
  .product__block__icon-list .icon-holder {
    width: var(--ICON-SIZE);
    height: var(--ICON-SIZE);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--ICON-STROKE-COLOR);
  }
  
  .product__block__icon-list .icon-holder svg {
    width: 100%;
    height: 100%;
  }
  
  .product__block__icon-list .icon-holder img {
    width: 100%;
    height: 100%;
    object-fit: contain;
  }
  
  .product__block__icon-list .icon-text {
    font-size: 16px;
  }
    /* Icon Delivery Alignment Styles */
  .product__block__icon.delivery-info.text-left {
    text-align: left;
    justify-content: flex-start;
  }
  
  .product__block__icon.delivery-info.text-center {
    text-align: center;
    justify-content: center;
  }
  
  .product__block__icon.delivery-info.text-right {
    text-align: right;
    justify-content: flex-end;
  }
  
  /* When icon is hidden, ensure proper text-only display */
  .product__block__icon.delivery-info {
    display: flex;
    align-items: center;
    gap: 8px;
  }
  
  .product__block__icon.delivery-info p {
    margin: 0;
  }
  
  /* New Icon Text Block Styles */
  .product__block__new-icon-text {
    padding-bottom: var(--PB);
    background-color: var(--BG-COLOR);
    border-radius: var(--BORDER-RADIUS);
    padding: 15px;
    margin-bottom: 10px;
  }
  
  .new-icon-text-content {
    display: flex;
    align-items: flex-start;
    width: 100%;
  }
  
  /* Icon positioning - Left (default) */
  .product__block__new-icon-text.icon-left .new-icon-text-content {
    flex-direction: row;
    align-items: center;
    gap: 12px;
  }
  
  .product__block__new-icon-text.icon-left .icon-holder {
    flex-shrink: 0;
    order: 1;
  }
  
  .product__block__new-icon-text.icon-left .text-content {
    order: 2;
    flex: 1;
  }
  
  /* Icon positioning - Right */
  .product__block__new-icon-text.icon-right .new-icon-text-content {
    flex-direction: row;
    align-items: center;
    gap: 12px;
  }
  
  .product__block__new-icon-text.icon-right .icon-holder {
    flex-shrink: 0;
    order: 2;
  }
  
  .product__block__new-icon-text.icon-right .text-content {
    order: 1;
    flex: 1;
  }
  
  /* Icon positioning - Top */
  .product__block__new-icon-text.icon-top .new-icon-text-content {
    flex-direction: column;
    align-items: flex-start;
    gap: 10px;
  }
  
  .product__block__new-icon-text.icon-top .icon-holder {
    align-self: flex-start;
  }
  
  .product__block__new-icon-text.icon-top .text-content {
    width: 100%;
  }
  
  /* Text alignment for icon-top layout */
  .product__block__new-icon-text.icon-top.text-center .new-icon-text-content {
    align-items: center;
  }
  
  .product__block__new-icon-text.icon-top.text-center .icon-holder {
    align-self: center;
  }
  
  .product__block__new-icon-text.icon-top.text-right .new-icon-text-content {
    align-items: flex-end;
  }
  
  .product__block__new-icon-text.icon-top.text-right .icon-holder {
    align-self: flex-end;
  }
  
  /* Icon styling */
  .product__block__new-icon-text .icon-holder {
    width: var(--ICON-SIZE);
    height: var(--ICON-SIZE);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--ICON-STROKE-COLOR);
  }
  
  .product__block__new-icon-text .icon-holder svg {
    width: 100%;
    height: 100%;
  }
  
  .product__block__new-icon-text .icon-holder img {
    width: 100%;
    height: 100%;
    object-fit: contain;
  }
  
  /* Text content styling */
  .product__block__new-icon-text .text-content {
    display: flex;
    flex-wrap: wrap;
    gap: 4px;
  }
  
  .product__block__new-icon-text .text-content p {
    font-size: var(--FONT-SIZE-DESKTOP);
    line-height: 1.4;
    margin: 0;
    display: inline;
  }
  
  .product__block__new-icon-text .inline-link {
    display: inline;
    color: inherit;
    text-decoration: underline;
  }
  
  .product__block__new-icon-text .inline-link:hover {
    text-decoration: none;
  }
  
  /* Text alignment classes */
  .product__block__new-icon-text.text-left .text-content {
    text-align: left;
    justify-content: flex-start;
  }
  
  .product__block__new-icon-text.text-center .text-content {
    text-align: center;
    justify-content: center;
  }
  
  .product__block__new-icon-text.text-right .text-content {
    text-align: right;
    justify-content: flex-end;
  }
  
  /* Mobile responsiveness */
  @media (max-width: 749px) {
    .product__block__icon-list.icon-list-row .icon-list-wrapper {
      
       gap: 15px;
    }
    
    .product__block__icon-list.icon-list-row .icon-list-item {
      min-width: auto;
      flex: none;
    }
    
    .icon-list-wrapper {
      gap: 15px;
    }
     .product__block__icon-list .icon-text {
    font-size: 14px;
   }
   
   /* New Icon Text mobile styles */
   .product__block__new-icon-text {
     padding: 12px;
   }
   
   .product__block__new-icon-text .text-content p {
     font-size: var(--FONT-SIZE-MOBILE);
   }
   
   /* Stack icon and text on mobile for left/right layouts */
   .product__block__new-icon-text.icon-left .new-icon-text-content,
   .product__block__new-icon-text.icon-right .new-icon-text-content {
     flex-direction: row;
     align-items: flex-start;
     gap: 10px;
   }
   
   .product__block__new-icon-text.icon-left .icon-holder,
   .product__block__new-icon-text.icon-right .icon-holder {
     order: 1;
     align-self: flex-start;
   }
   
   .product__block__new-icon-text.icon-left .text-content,
   .product__block__new-icon-text.icon-right .text-content {
     order: 2;
     width: 100%;
   }
   
   /* Maintain text alignment on mobile */
   .product__block__new-icon-text.text-center.icon-left .icon-holder,
   .product__block__new-icon-text.text-center.icon-right .icon-holder {
     align-self: center;
   }
   
   .product__block__new-icon-text.text-right.icon-left .icon-holder,
   .product__block__new-icon-text.text-right.icon-right .icon-holder {
     align-self: flex-end;
   }
   }
   
   /* Sticky Add to Cart Styling */
   .sticky-add-to-cart {
     position: fixed;
     left: 0;
     right: 0;
     z-index: 1000;
     border-bottom: 1px solid var(--color-border);
     box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
     opacity: 0;
     transition: opacity 0.3s ease-in-out;
   }
   .sticky-add-to-cart .sticky-add-to-cart__content{
         -webkit-backdrop-filter: blur(10px);
    backdrop-filter: blur(10px);
    background-color: #ffffffb0;
         transition: background-color .8s cubic-bezier(.215,.61,.355,1), -webkit-backdrop-filter .5s cubic-bezier(.215,.61,.355,1);
    transition: backdrop-filter .5s cubic-bezier(.215,.61,.355,1), background-color .8s cubic-bezier(.215,.61,.355,1);
    transition: backdrop-filter .5s cubic-bezier(.215,.61,.355,1), background-color .8s cubic-bezier(.215,.61,.355,1), -webkit-backdrop-filter .5s cubic-bezier(.215,.61,.355,1);
   }
   .sticky-add-to-cart .swatch__button{
    display: none;
   }

   /* Desktop: stick to top under header */
   @media (min-width: 750px) {
     .sticky-add-to-cart[data-sticky-desktop="true"] {
       bottom:0;
     }
     
     .sticky-add-to-cart[data-sticky-desktop="true"].show {
       opacity: 1;
     }
     
     .sticky-add-to-cart[data-sticky-desktop="false"] {
       display: none !important;
     }
   }
   
   /* Mobile: stick to bottom */
   @media (max-width: 749px) {
     .sticky-add-to-cart[data-sticky-mobile="true"] {
       bottom: 0;
       top: auto;
       border-top: 1px solid var(--color-border);
       border-bottom: none;
     }
     
     .sticky-add-to-cart[data-sticky-mobile="true"].show {
       opacity: 1;
     }
     
     .sticky-add-to-cart[data-sticky-mobile="false"] {
       display: none !important;
     }
   }
    
   .sticky-add-to-cart__content {
     display: flex;
     align-items: center;
     justify-content: space-between;
     padding-top: 12px;
     padding-bottom: 12px;
     padding-left: var(--outer);
     padding-right: var(--outer);
     margin: 0 auto;
   }
   
   .sticky-add-to-cart__left {
     flex: 1;
   }
   
   .sticky-add-to-cart__title {
     margin: 0;
     font-size: 16px;
     font-weight: 500;
     line-height: 1.2;
     color: var(--color-text);
   }
   
   .sticky-add-to-cart__right {
     display: flex;
     align-items: center;
     gap: 16px;
   }
   
   .sticky-add-to-cart__variants {
     display: flex;
     gap: 8px;
   }
   
   .sticky-add-to-cart__variants .radio__inputs {
     pointer-events: none;
   }
   
   .sticky-add-to-cart__price {
     display: flex;
     align-items: center;
     gap: 4px;
     font-weight: 600;
     color: var(--color-text);
   }
   
   .sticky-add-to-cart__button {
     white-space: nowrap;
     min-width: 170px;
     font-size: 16px;
     font-family: "centrano2", sans-serif;
         font-weight: 700;
    text-transform: none;
    letter-spacing: 0px;
background-color: #22282D;
    color: #fff;
    border-color: #22282D;
    transition: all 0.3s ease;
    text-transform: uppercase;
   }
   .sticky-add-to-cart__button:hover{
    background-color: #000;
    color: #fff;
    border-color: #000;
    transition: all 0.3s ease;
   }
   
   .sticky-add-to-cart__button:disabled,
   .sticky-add-to-cart__button.disabled {
    background-color: #ccc !important;
    color: #999 !important;
    border-color: #ccc !important;
    cursor: not-allowed !important;
   }
   
   .sticky-add-to-cart__button:disabled:hover,
   .sticky-add-to-cart__button.disabled:hover {
    background-color: #ccc !important;
    color: #999 !important;
    border-color: #ccc !important;
   }
   /* Mobile responsive adjustments */
   @media (max-width: 749px) {
     .sticky-add-to-cart__content {
       padding-top: 12px 16px;
       gap: 12px;
     }
     
     .sticky-add-to-cart__left {
       display: none;
     }
     
     .sticky-add-to-cart__right {
       flex: 1;
       justify-content: space-between;
       gap: 12px;
     }
     
     .sticky-add-to-cart__variants {
       gap: 6px;
     }
     
     .sticky-add-to-cart__button {
       
       font-size: 14px;
     }
   }

   /* Related Cards Styling */
   .product__block__related-cards {
     padding-bottom: var(--PB);
     padding-top: var(--PB);
   }
   
   .related-cards-title {
     font-size: 24px;
     font-weight: 600;
     margin-bottom: 20px;
     color: var(--color-text);
   }
   
   .related-cards-wrapper {
     display: flex;
     flex-direction: column;
     gap: 16px;
   }
   
   .related-card {
     background-color: #F6F6F6;
     border-radius: 10px;
     padding: 14px;
     width: 100%;
   }
   
   .related-card__content {
     display: flex;
     align-items: stretch;
     gap: 24px;
   }
   
   .related-card__image {
     width: 35%;
     flex-shrink: 0;
     display: flex; 
   }
   
   .related-card__image-link {
     display: flex;
     width: 100%;
     flex: 1;
     overflow: hidden;
     border-radius: 6px;
   }
   
   .related-card__image-link img {
     width: 100%;
     height: 100%;
     object-fit: cover;
   }
   
   .related-card__image-placeholder {
     width: 100%;
     height: 100%;
     background-color: #e5e5e5;
     border-radius: 6px;
     display: flex;
     align-items: center;
     justify-content: center;
   }
   
   .related-card__text {
     width: 65%;
     flex: 1;
     display: flex;
     flex-direction: column;
     gap: 8px;
     justify-content: space-between;
   }
   
   .related-card__title {
     margin: 0;
     font-size: 20px;
     font-weight: 400;
     line-height: 1.2;
   }
   
   .related-card__title a {
     color: var(--color-text);
     text-decoration: none;
   }
   
   .related-card__title a:hover {
     text-decoration: underline;
   }
   
   .related-card__price {
     display: flex;
     align-items: center;
     gap: 8px;
     font-size: 14px;
     font-weight: 500;
   }
   
   .related-card__price-compare {
     color: #999;
     text-decoration: line-through;
   }
   
   .related-card__price-current {
     color: var(--color-text);
   }
   
   .related-card__detail {
     font-size: 14px;
     color: var(--color-text);
     line-height: 1.4;
   }

   /* Enhanced Related Cards ATC Styling */

   .related-card__form-wrapper {
     display: flex;
     flex-direction: column;
     gap: 12px;
   }

   .related-card__variants{
    margin-bottom: 0;
    flex:1;
   }
   .related-card__variant-select {
     width: 100%;
     padding: 8px 12px;
     border: 1px solid #ddd;
     border-radius: 4px;
     background-color: #fff;
     font-size: 14px;
     color: var(--color-text);
     margin:0;
   }

   .related-card__variant-select:focus {
     outline: none;
     border-color: var(--color-primary);
   }

   .related-card__add-button {
     width: 100%;
     padding: 10px 16px;
     background-color: #22282D;
     color: #fff;
     border: 1px solid #22282D;
     border-radius: 4px;
     font-size: 10px;
     font-weight: 600;
     text-transform: uppercase;
     cursor: pointer;
     transition: all 0.3s ease;
     position: relative;
     display: flex;
     align-items: center;
     justify-content: center;
     gap: 8px;
     margin:0 !important;
     width: 100px;
     border-radius: 50px;
   }

   .related-card__add-button:hover {
     background-color: #000;
     border-color: #000;
   }

   .related-card__add-button:disabled {
     background-color: #ccc;
     border-color: #ccc;
     cursor: not-allowed;
   }

   .related-card__spinner {
     display: inline-block;
     width: 16px;
     height: 16px;
     border: 2px solid transparent;
     border-top: 2px solid currentColor;
     border-radius: 50%;
     animation: spin 1s linear infinite;
   }

   @keyframes spin {
     0% { transform: rotate(0deg); }
     100% { transform: rotate(360deg); }
   }
   .related-card-form {
    display: flex;
    align-items: center;
    gap: 10px;
}
   /* Mobile styles for related cards */
   @media (max-width: 749px) {
     .related-cards-title {
       font-size: 20px;
       margin-bottom: 16px;
     }
     
     .related-cards-wrapper {
       gap: 12px;
     }
     
     .related-card {
       padding: 12px;
     }
     
     .related-card__content {
       gap: 16px;
     }
     
     .related-card__title {
       font-size: 16px;
     }
     
     .related-card__price {
       font-size: 12px;
     }
     
     .related-card__detail {
       font-size: 12px;
     }



     .related-card__variant-select {
       font-size: 12px;
       padding: 6px 10px;
     }

     .related-card__add-button {
       font-size: 10px;
       padding: 8px 12px;
     }
     .product-image-wrapper img{
      border-radius: 10px;
     }
   }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Get all popup triggers
    const popupTriggers = document.querySelectorAll('[data-comparison-popup-trigger]');
    
    popupTriggers.forEach(function(trigger) {
      const popupId = trigger.getAttribute('data-comparison-popup-trigger');
      const popup = document.getElementById(popupId);
      
      if (popup) {
        // Open popup when clicking the trigger
        trigger.addEventListener('click', function(e) {
          e.preventDefault();
          popup.style.display = 'flex';
          document.body.classList.add('popup-open');
        });
        
        // Close popup when clicking the close button
        const closeButton = popup.querySelector('.comparison-popup-close');
        if (closeButton) {
          closeButton.addEventListener('click', function() {
            popup.style.display = 'none';
            document.body.classList.remove('popup-open');
          });
        }
        
        // Close popup when clicking the overlay (outside the popup content)
        popup.addEventListener('click', function(e) {
          if (e.target === popup) {
            popup.style.display = 'none';
            document.body.classList.remove('popup-open');
          }
        });
      }
    });
  });
</script>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const sectionId = '{{ section.id }}';
    const variantDataElement = document.getElementById('VariantOutofstockJson-' + sectionId);
    const outofstockMessageElement = document.getElementById('outofstock-message-' + sectionId);
    
    if (!variantDataElement || !outofstockMessageElement) return;
    
    const variantData = JSON.parse(variantDataElement.textContent);
    
    function checkOutofstockMessage(variantId) {
      const variant = variantData.variants.find(v => v.id == variantId);
      
      if (variant && !variant.available && variant.outofstock_message === true) {
        outofstockMessageElement.style.display = 'block';
      } else {
        outofstockMessageElement.style.display = 'none';
      }
    }
    
    // Check on page load
    const currentVariantId = {{ current_variant.id | json }};
    if (currentVariantId) {
      checkOutofstockMessage(currentVariantId);
    }
    
    // Listen for variant changes (main event)
    document.addEventListener('variant:change', function(event) {
      if (event.detail && event.detail.variant) {
        checkOutofstockMessage(event.detail.variant.id);
      }
    });
    
    // Listen for radio button changes (your swatch system)
    document.addEventListener('change', function(event) {
      if (event.target.matches('input[data-swatch-input]')) {
        // Get the form ID to find the current variant
        const form = event.target.form;
        if (form) {
          const formData = new FormData(form);
          const variantId = formData.get('id');
          if (variantId) {
            checkOutofstockMessage(variantId);
          }
        }
      }
    });
    
    // Alternative listener for any form input changes
    const productForm = document.querySelector('[data-product-form]');
    if (productForm) {
      productForm.addEventListener('change', function(event) {
        setTimeout(function() {
          const hiddenInput = productForm.querySelector('input[name="id"]');
          if (hiddenInput && hiddenInput.value) {
            checkOutofstockMessage(hiddenInput.value);
          }
        }, 100);
      });
    }

    // Related Cards JavaScript (unique to avoid conflicts)
    function updateRelatedCardVariantDisplay(selectElement, productUniqueId) {
      // Get the selected option
      const selectedOption = selectElement.options[selectElement.selectedIndex];
      
      // Update image
      const variantImage = selectedOption.getAttribute('data-variant-image');
      if (variantImage) {
        const currentImage = document.getElementById('related-variant-image-' + productUniqueId);
        if (currentImage) {
          currentImage.src = variantImage;
        }
      }
      
      // Update price
      const priceDisplay = document.getElementById('related-price-display-' + productUniqueId);
      if (priceDisplay) {
        const variantPrice = selectedOption.getAttribute('data-variant-price');
        const variantComparePrice = selectedOption.getAttribute('data-variant-compare-price');
        const variantOnSale = selectedOption.getAttribute('data-variant-on-sale') === 'true';
        
        if (variantOnSale) {
          priceDisplay.innerHTML = `
            <span class="related-card__price-compare">${variantComparePrice}</span>
            <span class="related-card__price-current">${variantPrice}</span>
          `;
        } else {
          priceDisplay.innerHTML = `<span class="related-card__price-current">${variantPrice}</span>`;
        }
      }
      
      // Update delivery info based on selected variant
      updateRelatedCardDeliveryInputs(selectElement, productUniqueId);
    }
    
    function updateRelatedCardDeliveryInputs(selectElement, productUniqueId) {
      // Get JSON data from the script tag
      const deliveryInfoElement = document.getElementById('related-delivery-info-' + productUniqueId);
      if (!deliveryInfoElement) {
        console.log('Delivery info JSON not found for related product ' + productUniqueId);
        return;
      }
      
      let deliveryInfo;
      try {
        deliveryInfo = JSON.parse(deliveryInfoElement.textContent);
      } catch (error) {
        console.log('Error parsing delivery info JSON:', error);
        return;
      }
      
      // Get selected variant ID
      const variantId = parseInt(selectElement.value, 10);
      
      // Find variant data if available
      const variantData = deliveryInfo.variants.find(variant => variant.id === variantId);
      
      // Determine which data to use (variant-specific or general product)
      const deliveryData = variantData || deliveryInfo.product;
      
      // Get the form to work within
      const form = selectElement.closest('form');
      if (!form) {
        console.log('Form not found for related product ' + productUniqueId);
        return;
      }
      
      // Get existing delivery inputs
      let deliveryTimeInputs = form.querySelectorAll('input[name="deliveryTime"]');
      let deliveryDateInputs = form.querySelectorAll('input[name="deliveryDate"]');
      
      // Clear ALL existing delivery inputs
      deliveryTimeInputs.forEach(input => input.remove());
      deliveryDateInputs.forEach(input => input.remove());
      
      // Create new input based on available data (following same logic as cart-upsell)
      if (deliveryData.delivery_estimated_date) {
        // Use variant-specific deliveryDate FIRST
        const newInput = document.createElement('input');
        newInput.type = 'hidden';
        newInput.name = 'deliveryDate';
        newInput.value = deliveryData.delivery_estimated_date;
        newInput.setAttribute('data-delivery-date-input', productUniqueId);
        form.appendChild(newInput);
      } else if (deliveryData.delivery_time) {
        // Use product deliveryTime SECOND
        const newInput = document.createElement('input');
        newInput.type = 'hidden';
        newInput.name = 'deliveryTime';
        newInput.value = deliveryData.delivery_time;
        newInput.setAttribute('data-delivery-time-input', productUniqueId);
        form.appendChild(newInput);
      } else if (deliveryData.estimated_date) {
        // Use product estimated_date THIRD
        const newInput = document.createElement('input');
        newInput.type = 'hidden';
        newInput.name = 'deliveryDate';
        newInput.value = deliveryData.estimated_date;
        newInput.setAttribute('data-delivery-date-input', productUniqueId);
        form.appendChild(newInput);
      }
    }

    // Make functions globally available for related cards
    window.updateRelatedCardVariantDisplay = updateRelatedCardVariantDisplay;
    window.updateRelatedCardDeliveryInputs = updateRelatedCardDeliveryInputs;
  });
</script>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const stickyBar = document.getElementById('sticky-add-to-cart');
    if (!stickyBar) return;
    
    const isDesktopEnabled = stickyBar.getAttribute('data-sticky-desktop') === 'true';
    const isMobileEnabled = stickyBar.getAttribute('data-sticky-mobile') === 'true';
    
    if (!isDesktopEnabled && !isMobileEnabled) return;
    
    const mainAddToCartButton = document.querySelector('.product__submit__buttons button.btn--add-to-cart');
    const stickyButton = stickyBar.querySelector('.sticky-add-to-cart__button');
    const stickyVariants = stickyBar.querySelector('#stickyLabels');
    const stickyPrice = stickyBar.querySelector('.sticky-add-to-cart__price-value');
    
    if (!mainAddToCartButton) return;
    
    // Copy variant swatches to sticky bar
    function copyVariantSwatches() {
      const originalSwatches = document.querySelector('.radio__inputs.radio__inputs--swatch');
      if (originalSwatches && stickyVariants) {
        const clonedSwatches = originalSwatches.cloneNode(true);
        // Remove all input elements from the clone
        const inputs = clonedSwatches.querySelectorAll('input');
        inputs.forEach(input => input.remove());
        
        stickyVariants.innerHTML = '';
        stickyVariants.appendChild(clonedSwatches);
      }
    }
    
    // Update sticky bar when variant changes
    function updateStickyBar() {
      // Update price
      const currentPrice = document.querySelector('.product__price .price__current');
      if (currentPrice && stickyPrice) {
        stickyPrice.textContent = currentPrice.textContent;
      }
      
      // Update button text based on availability
      const mainButton = document.querySelector('.btn--add-to-cart');
      const mainButtonText = mainButton ? mainButton.querySelector('[data-add-to-cart-text]') : null;
      if (mainButtonText && stickyButton) {
        stickyButton.textContent = mainButtonText.textContent;
        
        // Copy disabled state from main button
        if (mainButton.disabled) {
          stickyButton.disabled = true;
          stickyButton.classList.add('disabled');
        } else {
          stickyButton.disabled = false;
          stickyButton.classList.remove('disabled');
        }
      }
      
      // Update variant display
      copyVariantSwatches();
      
      // Show only selected variant swatch, hide others
      const selectedSwatch = document.querySelector('.radio__inputs--swatch input:checked');
      if (selectedSwatch) {
        const selectedValue = selectedSwatch.value;
        const stickySwatches = stickyVariants.querySelectorAll('.swatch__button');
        
        stickySwatches.forEach(swatch => {
          const label = swatch.querySelector('label');
          const valueSpan = label ? label.querySelector('.value') : null;
          const swatchData = label ? label.getAttribute('data-swatch') : null;
          
          // Try to match either by data-swatch attribute or value span text
          const matchesValue = (valueSpan && valueSpan.textContent.trim() === selectedValue) || 
                              (swatchData && swatchData === selectedValue);
          
          if (matchesValue) {
            swatch.style.display = 'block';
            swatch.classList.add('is-checked');
          } else {
            swatch.style.display = 'none';
            swatch.classList.remove('is-checked');
          }
        });
      }
    }
    
    // Intersection Observer to show/hide sticky bar
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        const isVisible = entry.isIntersecting;
        
        if (isVisible) {
          stickyBar.classList.remove('show');
        } else {
          // Check if we should show based on device
          const isMobile = window.innerWidth <= 749;
          const shouldShow = (isMobile && isMobileEnabled) || (!isMobile && isDesktopEnabled);
          
          if (shouldShow) {
            stickyBar.style.display = 'block';
            stickyBar.classList.add('show');
          }
        }
      });
    }, {
      threshold: 0.1
    });
    
    observer.observe(mainAddToCartButton);
    
    // Handle sticky button click
    if (stickyButton) {
      stickyButton.addEventListener('click', function() {
        mainAddToCartButton.click();
      });
    }
    
    // Listen for variant changes
    document.addEventListener('variant:change', updateStickyBar);
    document.addEventListener('change', function(event) {
      if (event.target.matches('input[data-swatch-input]')) {
        setTimeout(updateStickyBar, 100);
      }
    });
    
    // Initial setup
    copyVariantSwatches();
    updateStickyBar();
    
    // Handle window resize
    window.addEventListener('resize', function() {
      const isMobile = window.innerWidth <= 749;
      const shouldShow = (isMobile && isMobileEnabled) || (!isMobile && isDesktopEnabled);
      
      if (!shouldShow) {
        stickyBar.classList.remove('show');
      }
    });
  });
</script>

{% liquid
  assign aspect_height_multiplier = 1
  case block.settings.image_swatch_aspect_ratio
    when '1/1'
      assign aspect_height_multiplier = 1
    when '16/9'
      assign aspect_height_multiplier = 0.5625
    when '9/16'
      assign aspect_height_multiplier = 1.7778
    when '4/3'
      assign aspect_height_multiplier = 0.75
  endcase
%}

<style>
/* Image Swatch Styles - Scoped to Section */
#shopify-section-{{ section.id }} .swatch__button--image .swatch__label--image {
  width: var(--IMAGE-SWATCH-WIDTH);
  height: calc(var(--IMAGE-SWATCH-WIDTH) * {{ aspect_height_multiplier }});
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  border: 2px solid var(--border);
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}

/* Hover effect */
#shopify-section-{{ section.id }} .swatch__button--image label:hover {
  border-color: var(--text-dark);
  cursor: pointer;
}

/* Selected state - border */
#shopify-section-{{ section.id }} .swatch__button--image input:checked ~ .swatch__label--image {
  border-color: var(--text-dark);
  border-width: 2px;
}

/* Selected state - checkmark on top right */
#shopify-section-{{ section.id }} .swatch__button--image input:checked ~ .swatch__label--image:before {
  content: "";
  position: absolute;
  top: 4px;
  right: 4px;
  width: 18px;
  height: 18px;
  background-color: var(--text-dark);
  border-radius: 50%;
  z-index: 2;
}

#shopify-section-{{ section.id }} .swatch__button--image input:checked ~ .swatch__label--image:after {
  content: "";
  position: absolute;
  top: 8px;
  right: 8px;
  width: 10px;
  height: 10px;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' stroke-linecap='square' stroke-linejoin='arcs' viewBox='0 0 24 24'%3E%3Cpath d='m20 6.5-11 11-5-5' stroke='white' stroke-width='3' fill='none'/%3E%3C/svg%3E");
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  z-index: 3;
}

/* No Image fallback */
#shopify-section-{{ section.id }} .swatch__no-image {
  font-family: var(--FONT-STACK-ACCENT);
  font-size: calc(var(--font-2) * var(--FONT-ADJUST-ACCENT));
  color: var(--text-light);
  text-align: center;
  padding: 4px;
  display: block;
  line-height: 1.2;
}

/* Disabled/sold out state */
#shopify-section-{{ section.id }} .swatch__button--image input:disabled ~ .swatch__label--image:before,
#shopify-section-{{ section.id }} .swatch__button--image input.sold-out ~ .swatch__label--image:before,
#shopify-section-{{ section.id }} .swatch__button--image input.unavailable ~ .swatch__label--image:before {
  content: "";
  position: absolute;
  top: 50%;
  left: 50%;
  z-index: 4;
  width: 2px;
  height: 110%;
  border-radius: 0;
  background: var(--bg);
  transform: translate(-50%, -50%) rotate(45deg);
}

/* Mobile adjustments */
@media only screen and (max-width: 767px) {
  #shopify-section-{{ section.id }} .swatch__button--image .swatch__label--image {
    width: calc(var(--IMAGE-SWATCH-WIDTH) - 8px);
    height: calc((var(--IMAGE-SWATCH-WIDTH) - 8px) * {{ aspect_height_multiplier }});
  }
}
</style>
