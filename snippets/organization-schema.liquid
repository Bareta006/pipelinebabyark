{% comment %}
  /snippets/organization-schema.liquid
  
  Organization Schema Markup
  - Fetches organization data from metaobject
  - Generates Schema.org compliant JSON-LD
  - Global organization schema for SEO
{% endcomment %}

{%- assign org_metaobject = shop.metaobjects.organization_schema_markup.first -%}

<!-- Organization Schema Debug: {{ org_metaobject | json }} -->

{% if org_metaobject %}
<!-- Organization Schema Found - Rendering JSON-LD -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization"
  {%- if org_metaobject.business_name != blank -%}
  ,"name": {{ org_metaobject.business_name | json }}
  {%- endif -%}
  {%- if org_metaobject.description != blank -%}
  ,"description": {{ org_metaobject.description | json }}
  {%- endif -%}
  {%- if org_metaobject.website_url != blank -%}
  ,"url": {{ org_metaobject.website_url | json }}
  {%- endif -%}
  {%- if org_metaobject.phone_number != blank -%}
  ,"telephone": {{ org_metaobject.phone_number | json }}
  {%- endif -%}
  {%- if org_metaobject.email != blank -%}
  ,"email": {{ org_metaobject.email | json }}
  {%- endif -%}
  {%- if org_metaobject.address != blank -%}
  ,"address": {{ org_metaobject.address | json }}
  {%- endif -%}
  {%- if org_metaobject.business_type_industry != blank -%}
  ,"industry": {{ org_metaobject.business_type_industry | json }}
  {%- endif -%}
  {%- if org_metaobject.founded_date != blank -%}
  ,"foundingDate": {{ org_metaobject.founded_date | json }}
  {%- endif -%}
  {%- if org_metaobject.logo != blank -%}
  ,"logo": {
    "@type": "ImageObject",
    "url": {{ org_metaobject.logo | image_url: width: 600 | json }},
    "width": 600,
    "height": 600
  }
  {%- endif -%}
  {%- if org_metaobject.social_media_profiles != blank -%}
  {%- assign social_profiles = org_metaobject.social_media_profiles | split: ',' -%}
  ,"sameAs": [
    {%- for profile in social_profiles -%}
    {{ profile | strip | json }}{% unless forloop.last %},{% endunless %}
    {%- endfor -%}
  ]
  {%- endif -%}
  {%- if org_metaobject.business_hours != blank -%}
  {%- assign hours_list = org_metaobject.business_hours | split: ',' -%}
  ,"openingHours": [
    {%- for hours in hours_list -%}
    {{ hours | strip | json }}{% unless forloop.last %},{% endunless %}
    {%- endfor -%}
  ]
  {%- endif -%}
  ,"publisher": {
    "@type": "Organization"
    {%- if org_metaobject.business_name != blank -%}
    ,"name": {{ org_metaobject.business_name | json }}
    {%- endif -%}
    {%- if org_metaobject.logo != blank -%}
    ,"logo": {
      "@type": "ImageObject",
      "url": {{ org_metaobject.logo | image_url: width: 600 | json }},
      "width": 600,
      "height": 600
    }
    {%- endif -%}
  }
}
</script>
{% else %}
<!-- Organization Schema: No metaobject found with type 'organization_schema_markup' -->
{% endif %} 